INFO:__main__:AI service started with lazy loading support
INFO:     Will watch for changes in these directories: ['/root/autodl-tmp/EasyVideo/ai-service']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [3619] using WatchFiles
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [3716]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:57378 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57390 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57390 - "GET /health HTTP/1.1" 200 OK
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:api_server:PromptOptimizer initialized on demand
INFO:modules.prompt_optimizer:Optimizing prompt: 黑白相间的小猫趴在桌子上,微笑, 可爱, 
INFO:modules.prompt_optimizer:Optimization type: 通用型
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|█████     | 1/2 [00:01<00:01,  1.89s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:03<00:00,  1.70s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:03<00:00,  1.73s/it]
The image processor of type `Qwen2VLImageProcessor` is now loaded as a fast processor by default, even if the model checkpoint was saved with a slow processor. This is a breaking change and may produce slightly different outputs. To continue using the slow processor, instantiate this class with `use_fast=False`. Note that this behavior will be extended to all models in a future release.
You have video processor config saved in `preprocessor.json` file which is deprecated. Video processor configs should be saved in their own `video_preprocessor.json` file. You can rename the file or load and save the processor back which renames it automatically. Loading from `preprocessor.json` will be removed in v5.0.
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: Black and white kitten, lying on table, smiling, cute, small, adorable, relaxed posture, simple background, warm lighting, cozy atmosphere, playful expression
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:api_server:PromptOptimizer model unloaded successfully
INFO:     127.0.0.1:42640 - "POST /prompt/optimize HTTP/1.1" 200 OK
INFO:api_server:Video generation task queued for task_id: video_1756436209682_zux05ryaa
INFO:     127.0.0.1:42014 - "POST /video/generate HTTP/1.1" 200 OK
INFO:modules.video_generator:Model path: /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B
INFO:modules.video_generator:Output dir: /root/autodl-tmp/EasyVideo/outputs
INFO:api_server:VideoGenerator initialized on demand
INFO:modules.video_generator:Video gen: loading model
Loading models from: /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/models_t5_umt5-xxl-enc-bf16.pth
    model_name: wan_video_text_encoder model_class: WanTextEncoder
    The following models are loaded: ['wan_video_text_encoder'].
Loading models from: ['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors']
    model_name: wan_video_dit model_class: WanModel
        This model is initialized with extra kwargs: {'has_image_input': False, 'patch_size': [1, 2, 2], 'in_dim': 36, 'dim': 5120, 'ffn_dim': 13824, 'freq_dim': 256, 'text_dim': 4096, 'out_dim': 16, 'num_heads': 40, 'num_layers': 40, 'eps': 1e-06, 'require_clip_embedding': False}
    The following models are loaded: ['wan_video_dit'].
Loading models from: ['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors']
    model_name: wan_video_dit model_class: WanModel
        This model is initialized with extra kwargs: {'has_image_input': False, 'patch_size': [1, 2, 2], 'in_dim': 36, 'dim': 5120, 'ffn_dim': 13824, 'freq_dim': 256, 'text_dim': 4096, 'out_dim': 16, 'num_heads': 40, 'num_layers': 40, 'eps': 1e-06, 'require_clip_embedding': False}
INFO:     127.0.0.1:52386 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
2025-08-29 10:57:29,733 - modelscope - INFO - Target directory already exists, skipping creation.
INFO:watchfiles.main:1 change detected
INFO:modules.video_generator:Video generation model loaded on demand successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: Black and white kitten, lying on table, smiling, cute, small, adorable, relaxed posture, simple background, warm lighting, cozy atmosphere, playful expression
INFO:modules.prompt_optimizer:Optimization type: 通用型
INFO:modules.prompt_optimizer:Task type: video
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
    The following models are loaded: ['wan_video_dit'].
Loading models from: /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/Wan2.1_VAE.pth
    model_name: wan_video_vae model_class: WanVideoVAE
    The following models are loaded: ['wan_video_vae'].
Using wan_video_text_encoder from /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/models_t5_umt5-xxl-enc-bf16.pth.
More than one wan_video_dit models are loaded in model manager: [['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors'], ['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors']]. Using wan_video_dit from [['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors'], ['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors']].
Using wan_video_vae from /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/Wan2.1_VAE.pth.
No wan_video_image_encoder models available.
No wan_video_motion_controller models available.
No wan_video_vace models available.
Downloading Model from https://www.modelscope.cn to directory: /root/autodl-tmp/EasyVideo/ai-service/models/Wan-AI/Wan2.1-T2V-1.3B
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|█████     | 1/2 [00:02<00:02,  2.77s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:05<00:00,  2.60s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:05<00:00,  2.62s/it]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: 一只黑白相间的可爱小猫，躺在桌子上面，面带微笑，非常小巧和萌，姿势放松，背景简单而温馨，光线温暖柔和，营造出一种舒适宜人的氛围，同时表现出它顽皮的表情。
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.video_generator:Optimized prompt: 一只黑白相间的可爱小猫，躺在桌子上面，面带微笑，非常小巧和萌，姿势放松，背景简单而温馨，光线温暖柔和，营造出一种舒适宜人的氛围，同时表现出它顽皮的表情。
INFO:modules.video_generator:Generating video with prompt: 一只黑白相间的可爱小猫，躺在桌子上面，面带微笑，非常小巧和萌，姿势放松，背景简单而温馨，光线温暖柔和，营造出一种舒适宜人的氛围，同时表现出它顽皮的表情。, cinematic lighting, smooth motion, realistic, high quality
INFO:modules.video_generator:Parameters: seed=63458, tiled=True, steps=20, cfg_scale=5.0
INFO:     127.0.0.1:56438 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
VAE encoding:   0%|          | 0/9 [00:00<?, ?it/s]VAE encoding:  11%|█         | 1/9 [00:00<00:07,  1.14it/s]VAE encoding:  22%|██▏       | 2/9 [00:01<00:05,  1.35it/s]VAE encoding:  33%|███▎      | 3/9 [00:02<00:04,  1.43it/s]VAE encoding:  44%|████▍     | 4/9 [00:02<00:03,  1.47it/s]VAE encoding:  56%|█████▌    | 5/9 [00:03<00:02,  1.49it/s]VAE encoding:  67%|██████▋   | 6/9 [00:04<00:01,  1.51it/s]VAE encoding:  78%|███████▊  | 7/9 [00:04<00:01,  1.52it/s]VAE encoding:  89%|████████▉ | 8/9 [00:05<00:00,  1.53it/s]VAE encoding: 100%|██████████| 9/9 [00:06<00:00,  1.53it/s]VAE encoding: 100%|██████████| 9/9 [00:06<00:00,  1.48it/s]
  0%|          | 0/20 [00:00<?, ?it/s]INFO:     127.0.0.1:39266 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
  5%|▌         | 1/20 [00:30<09:30, 30.02s/it]INFO:     127.0.0.1:47254 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 10%|█         | 2/20 [00:51<07:32, 25.13s/it] 15%|█▌        | 3/20 [01:13<06:41, 23.60s/it]INFO:     127.0.0.1:41496 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 20%|██        | 4/20 [01:35<06:06, 22.91s/it]INFO:     127.0.0.1:60142 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 25%|██▌       | 5/20 [01:57<05:38, 22.54s/it]INFO:     127.0.0.1:44240 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 30%|███       | 6/20 [02:19<05:12, 22.33s/it] 35%|███▌      | 7/20 [02:41<04:48, 22.20s/it]INFO:     127.0.0.1:60954 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 40%|████      | 8/20 [03:03<04:25, 22.11s/it]INFO:     127.0.0.1:51784 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 45%|████▌     | 9/20 [03:24<04:02, 22.05s/it]INFO:     127.0.0.1:39874 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
INFO:     127.0.0.1:55816 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 50%|█████     | 10/20 [04:15<05:08, 30.81s/it] 55%|█████▌    | 11/20 [04:37<04:12, 28.06s/it]INFO:     127.0.0.1:46610 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 60%|██████    | 12/20 [04:59<03:29, 26.17s/it]INFO:     127.0.0.1:48074 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 65%|██████▌   | 13/20 [05:20<02:54, 24.86s/it] 70%|███████   | 14/20 [05:42<02:23, 23.96s/it]INFO:     127.0.0.1:56776 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 75%|███████▌  | 15/20 [06:04<01:56, 23.34s/it]INFO:     127.0.0.1:51582 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 80%|████████  | 16/20 [06:26<01:31, 22.90s/it]INFO:     127.0.0.1:39932 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 85%|████████▌ | 17/20 [06:48<01:07, 22.60s/it] 90%|█████████ | 18/20 [07:10<00:44, 22.38s/it]INFO:     127.0.0.1:56464 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
 95%|█████████▌| 19/20 [07:32<00:22, 22.23s/it]INFO:     127.0.0.1:39400 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
100%|██████████| 20/20 [07:54<00:00, 22.12s/it]100%|██████████| 20/20 [07:54<00:00, 23.70s/it]
INFO:     127.0.0.1:40946 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
VAE decoding:   0%|          | 0/9 [00:00<?, ?it/s]VAE decoding:  11%|█         | 1/9 [00:01<00:09,  1.21s/it]VAE decoding:  22%|██▏       | 2/9 [00:02<00:08,  1.15s/it]VAE decoding:  33%|███▎      | 3/9 [00:03<00:06,  1.13s/it]VAE decoding:  44%|████▍     | 4/9 [00:04<00:05,  1.12s/it]VAE decoding:  56%|█████▌    | 5/9 [00:05<00:04,  1.11s/it]VAE decoding:  67%|██████▋   | 6/9 [00:06<00:03,  1.11s/it]VAE decoding:  78%|███████▊  | 7/9 [00:07<00:02,  1.11s/it]VAE decoding:  89%|████████▉ | 8/9 [00:08<00:01,  1.11s/it]VAE decoding: 100%|██████████| 9/9 [00:10<00:00,  1.11s/it]VAE decoding: 100%|██████████| 9/9 [00:10<00:00,  1.12s/it]
Saving video:   0%|          | 0/73 [00:00<?, ?it/s]huggingface/tokenizers: The current process just got forked, after parallelism has already been used. Disabling parallelism to avoid deadlocks...
To disable this warning, you can either:
	- Avoid using `tokenizers` before the fork if possible
	- Explicitly set the environment variable TOKENIZERS_PARALLELISM=(true | false)
Saving video:   1%|▏         | 1/73 [00:01<01:20,  1.11s/it]Saving video:  79%|███████▉  | 58/73 [00:01<00:00, 65.58it/s]Saving video: 100%|██████████| 73/73 [00:01<00:00, 58.54it/s]
INFO:modules.video_generator:Unloading video generation model to free memory...
INFO:modules.video_generator:Video generation model unloaded successfully
INFO:modules.video_generator:Video generated successfully: /root/autodl-tmp/EasyVideo/outputs/videos/video_20250829_105730_video_1756436209682_zux05ryaa.mp4
INFO:api_server:Video generation completed for task_id: video_1756436209682_zux05ryaa
INFO:api_server:VideoGenerator model unloaded successfully
INFO:     127.0.0.1:42220 - "GET /task/progress/video_1756436209682_zux05ryaa HTTP/1.1" 200 OK
INFO:     127.0.0.1:42452 - "GET /health HTTP/1.1" 200 OK
INFO:modules.prompt_optimizer:Optimizing prompt: 黑白相间的小猫趴在桌子上,微笑, 可爱
INFO:modules.prompt_optimizer:Optimization type: 通用型
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|█████     | 1/2 [00:01<00:01,  1.09s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:01<00:00,  1.04it/s]Loading checkpoint shards: 100%|██████████| 2/2 [00:01<00:00,  1.02it/s]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: black and white cat lying on table, smiling, cute, small size, soft fur, playful expression, indoor setting, wooden surface, soft lighting, cozy atmosphere, relaxed posture, gentle gaze, charming appearance, adorable subject
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:api_server:PromptOptimizer model unloaded successfully
INFO:     127.0.0.1:45308 - "POST /prompt/optimize HTTP/1.1" 200 OK
INFO:api_server:Video generation task queued for task_id: video_1756436950969_0y6k5j2ic
INFO:     127.0.0.1:54376 - "POST /video/generate HTTP/1.1" 200 OK
INFO:modules.video_generator:Video gen: loading model
Loading models from: /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/models_t5_umt5-xxl-enc-bf16.pth
    model_name: wan_video_text_encoder model_class: WanTextEncoder
    The following models are loaded: ['wan_video_text_encoder'].
Loading models from: ['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors']
    model_name: wan_video_dit model_class: WanModel
        This model is initialized with extra kwargs: {'has_image_input': False, 'patch_size': [1, 2, 2], 'in_dim': 36, 'dim': 5120, 'ffn_dim': 13824, 'freq_dim': 256, 'text_dim': 4096, 'out_dim': 16, 'num_heads': 40, 'num_layers': 40, 'eps': 1e-06, 'require_clip_embedding': False}
    The following models are loaded: ['wan_video_dit'].
Loading models from: ['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors']
    model_name: wan_video_dit model_class: WanModel
        This model is initialized with extra kwargs: {'has_image_input': False, 'patch_size': [1, 2, 2], 'in_dim': 36, 'dim': 5120, 'ffn_dim': 13824, 'freq_dim': 256, 'text_dim': 4096, 'out_dim': 16, 'num_heads': 40, 'num_layers': 40, 'eps': 1e-06, 'require_clip_embedding': False}
INFO:     127.0.0.1:44710 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
INFO:modules.video_generator:Video generation model loaded on demand successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: black and white cat lying on table, smiling, cute, small size, soft fur, playful expression, indoor setting, wooden surface, soft lighting, cozy atmosphere, relaxed posture, gentle gaze, charming appearance, adorable subject
INFO:modules.prompt_optimizer:Optimization type: 通用型
INFO:modules.prompt_optimizer:Task type: video
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
    The following models are loaded: ['wan_video_dit'].
Loading models from: /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/Wan2.1_VAE.pth
    model_name: wan_video_vae model_class: WanVideoVAE
    The following models are loaded: ['wan_video_vae'].
Using wan_video_text_encoder from /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/models_t5_umt5-xxl-enc-bf16.pth.
More than one wan_video_dit models are loaded in model manager: [['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors'], ['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors']]. Using wan_video_dit from [['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/high_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors'], ['/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00001-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00002-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00003-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00004-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00005-of-00006.safetensors', '/root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/low_noise_model/diffusion_pytorch_model-00006-of-00006.safetensors']].
Using wan_video_vae from /root/autodl-tmp/Wan-AI/Wan2.2-I2V-A14B/Wan2.1_VAE.pth.
No wan_video_image_encoder models available.
No wan_video_motion_controller models available.
No wan_video_vace models available.
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|█████     | 1/2 [00:00<00:00,  1.24it/s]Loading checkpoint shards: 100%|██████████| 2/2 [00:01<00:00,  1.41it/s]Loading checkpoint shards: 100%|██████████| 2/2 [00:01<00:00,  1.38it/s]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: 一只黑白相间的猫咪躺在木桌上，面带微笑，可爱的小体型，柔软的毛发，活泼的表情，在室内环境中，木质表面，柔和的灯光，舒适的氛围，放松的姿态，温柔的眼神，迷人的外表，可爱的主题
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.video_generator:Optimized prompt: 一只黑白相间的猫咪躺在木桌上，面带微笑，可爱的小体型，柔软的毛发，活泼的表情，在室内环境中，木质表面，柔和的灯光，舒适的氛围，放松的姿态，温柔的眼神，迷人的外表，可爱的主题
INFO:modules.video_generator:Generating video with prompt: 一只黑白相间的猫咪躺在木桌上，面带微笑，可爱的小体型，柔软的毛发，活泼的表情，在室内环境中，木质表面，柔和的灯光，舒适的氛围，放松的姿态，温柔的眼神，迷人的外表，可爱的主题, cinematic lighting, smooth motion, realistic, high quality
INFO:modules.video_generator:Parameters: seed=63458, tiled=True, steps=20, cfg_scale=7.5
INFO:     127.0.0.1:35250 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
VAE encoding:   0%|          | 0/9 [00:00<?, ?it/s]VAE encoding:  11%|█         | 1/9 [00:00<00:05,  1.53it/s]VAE encoding:  22%|██▏       | 2/9 [00:01<00:04,  1.54it/s]VAE encoding:  33%|███▎      | 3/9 [00:01<00:03,  1.54it/s]VAE encoding:  44%|████▍     | 4/9 [00:02<00:03,  1.54it/s]VAE encoding:  56%|█████▌    | 5/9 [00:03<00:02,  1.54it/s]VAE encoding:  67%|██████▋   | 6/9 [00:03<00:01,  1.54it/s]VAE encoding:  78%|███████▊  | 7/9 [00:04<00:01,  1.54it/s]VAE encoding:  89%|████████▉ | 8/9 [00:05<00:00,  1.54it/s]VAE encoding: 100%|██████████| 9/9 [00:05<00:00,  1.54it/s]VAE encoding: 100%|██████████| 9/9 [00:05<00:00,  1.54it/s]
  0%|          | 0/20 [00:00<?, ?it/s]INFO:     127.0.0.1:35426 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
  5%|▌         | 1/20 [00:27<08:45, 27.65s/it]INFO:     127.0.0.1:48322 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 10%|█         | 2/20 [00:49<07:15, 24.18s/it]INFO:api_server:Cleaned up task progress for task_id: video_1756436209682_zux05ryaa
 15%|█▌        | 3/20 [01:11<06:32, 23.10s/it]INFO:     127.0.0.1:57358 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 20%|██        | 4/20 [01:33<06:01, 22.61s/it]INFO:     127.0.0.1:53696 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 25%|██▌       | 5/20 [01:54<05:35, 22.35s/it]INFO:     127.0.0.1:41290 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 30%|███       | 6/20 [02:16<05:10, 22.21s/it] 35%|███▌      | 7/20 [02:38<04:47, 22.11s/it]INFO:     127.0.0.1:40704 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 40%|████      | 8/20 [03:00<04:24, 22.06s/it]INFO:     127.0.0.1:59426 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 45%|████▌     | 9/20 [03:22<04:02, 22.02s/it]INFO:     127.0.0.1:60516 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 50%|█████     | 10/20 [04:02<04:35, 27.52s/it]INFO:     127.0.0.1:52080 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 55%|█████▌    | 11/20 [04:24<03:52, 25.78s/it]INFO:     127.0.0.1:51540 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 60%|██████    | 12/20 [04:46<03:16, 24.59s/it] 65%|██████▌   | 13/20 [05:08<02:46, 23.76s/it]INFO:     127.0.0.1:46404 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 70%|███████   | 14/20 [05:29<02:19, 23.18s/it]INFO:     127.0.0.1:58680 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 75%|███████▌  | 15/20 [05:51<01:53, 22.78s/it] 80%|████████  | 16/20 [06:13<01:29, 22.49s/it]INFO:     127.0.0.1:44050 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 85%|████████▌ | 17/20 [06:35<01:06, 22.29s/it]INFO:     127.0.0.1:55620 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 90%|█████████ | 18/20 [06:57<00:44, 22.15s/it]INFO:     127.0.0.1:51048 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
 95%|█████████▌| 19/20 [07:19<00:22, 22.05s/it]100%|██████████| 20/20 [07:40<00:00, 21.98s/it]100%|██████████| 20/20 [07:40<00:00, 23.04s/it]
INFO:     127.0.0.1:56828 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
VAE decoding:   0%|          | 0/9 [00:00<?, ?it/s]VAE decoding:  11%|█         | 1/9 [00:01<00:08,  1.11s/it]VAE decoding:  22%|██▏       | 2/9 [00:02<00:07,  1.11s/it]VAE decoding:  33%|███▎      | 3/9 [00:03<00:06,  1.10s/it]VAE decoding:  44%|████▍     | 4/9 [00:04<00:05,  1.10s/it]VAE decoding:  56%|█████▌    | 5/9 [00:05<00:04,  1.11s/it]VAE decoding:  67%|██████▋   | 6/9 [00:06<00:03,  1.11s/it]VAE decoding:  78%|███████▊  | 7/9 [00:07<00:02,  1.11s/it]VAE decoding:  89%|████████▉ | 8/9 [00:08<00:01,  1.11s/it]VAE decoding: 100%|██████████| 9/9 [00:09<00:00,  1.11s/it]VAE decoding: 100%|██████████| 9/9 [00:09<00:00,  1.11s/it]
Saving video:   0%|          | 0/73 [00:00<?, ?it/s]huggingface/tokenizers: The current process just got forked, after parallelism has already been used. Disabling parallelism to avoid deadlocks...
To disable this warning, you can either:
	- Avoid using `tokenizers` before the fork if possible
	- Explicitly set the environment variable TOKENIZERS_PARALLELISM=(true | false)
Saving video:   1%|▏         | 1/73 [00:01<01:46,  1.48s/it]Saving video:  77%|███████▋  | 56/73 [00:01<00:00, 49.07it/s]Saving video: 100%|██████████| 73/73 [00:01<00:00, 44.98it/s]
INFO:modules.video_generator:Unloading video generation model to free memory...
INFO:modules.video_generator:Video generation model unloaded successfully
INFO:modules.video_generator:Video generated successfully: /root/autodl-tmp/EasyVideo/outputs/videos/video_20250829_110954_video_1756436950969_0y6k5j2ic.mp4
INFO:api_server:Video generation completed for task_id: video_1756436950969_0y6k5j2ic
INFO:api_server:VideoGenerator model unloaded successfully
INFO:     127.0.0.1:33740 - "GET /task/progress/video_1756436950969_0y6k5j2ic HTTP/1.1" 200 OK
INFO:     127.0.0.1:39056 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:48760 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:54844 - "GET /health HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: video_1756436950969_0y6k5j2ic
INFO:     127.0.0.1:59438 - "GET /health HTTP/1.1" 200 OK
