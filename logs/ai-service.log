INFO:__main__:AI service started with lazy loading support
INFO:     Will watch for changes in these directories: ['/root/autodl-tmp/EasyVideo/ai-service']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [4545] using WatchFiles
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [4764]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:55400 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:55408 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:55410 - "GET /health HTTP/1.1" 200 OK
INFO:modules.image_generator:FLUX model path configured: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
INFO:api_server:ImageGenerator initialized on demand
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 18.98it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 18.93it/s]
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:01,  3.23it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards:  33%|â–ˆâ–ˆâ–ˆâ–Ž      | 1/3 [00:00<00:00,  7.48it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 13.55it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 12.52it/s]
Loading pipeline components...:  29%|â–ˆâ–ˆâ–Š       | 2/7 [00:00<00:01,  2.55it/s]Loading pipeline components...:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 4/7 [00:00<00:00,  5.05it/s]You set `add_prefix_space`. The tokenizer needs to be converted from the slow tokenizers
Loading pipeline components...:  71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 5/7 [00:01<00:00,  4.33it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:01<00:00,  5.38it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: edge lighting, low-contrast, medium close-up shot, left-heavy composition, clean single shot, warm colors, soft lighting,  side lighting, day time.A young girl sits in a field of tall grass with two fluffy donkeys standing behind her. The girl, about eleven or twelve years old, is wearing a simple floral dress and has her hair in two pigtails, with an innocent smile on her face. She sits cross-legged, gently touching the wildflowers beside her. The small donkeys are sturdy, their ears perked up as they look curiously toward the camera. Sunlight bathes the field, creating a warm and natural scene.
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:00<00:00,  1.05it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.20it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.17it/s]
The image processor of type `Qwen2VLImageProcessor` is now loaded as a fast processor by default, even if the model checkpoint was saved with a slow processor. This is a breaking change and may produce slightly different outputs. To continue using the slow processor, instantiate this class with `use_fast=False`. Note that this behavior will be extended to all models in a future release.
You have video processor config saved in `preprocessor.json` file which is deprecated. Video processor configs should be saved in their own `video_preprocessor.json` file. You can rename the file or load and save the processor back which renames it automatically. Loading from `preprocessor.json` will be removed in v5.0.
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: "Edge lighting, low contrast, medium close-up shot, left-heavy composition, clean single shot, warm colors, soft lighting, side lighting, daytime. A young girl sits in a field of tall grass with two fluffy donkeys behind her. The girl, around 11 or 12 years old, wears a simple floral dress and has her hair tied into two pigtails, smiling innocently. She sits cross-legged, gently touching wildflowers beside her. The small donkeys appear sturdy, with perked ears looking curiously at the camera. Soft sunlight bathes the field, creating a warm and natural scene."
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: edge lighting, low-contrast, medium close-up shot, left-heavy composition, clean single shot, warm colors, soft lighting,  side lighting, day time.A young girl sits in a field of tall grass with two fluffy donkeys standing behind her. The girl, about eleven or twelve years old, is wearing a simple floral dress and has her hair in two pigtails, with an innocent smile on her face. She sits cross-legged, gently touching the wildflowers beside her. The small donkeys are sturdy, their ears perked up as they look curiously toward the camera. Sunlight bathes the field, creating a warm and natural scene.
INFO:modules.image_generator:Optimized prompt: "Edge lighting, low contrast, medium close-up shot, left-heavy composition, clean single shot, warm colors, soft lighting, side lighting, daytime. A young girl sits in a field of tall grass with two fluffy donkeys behind her. The girl, around 11 or 12 years old, wears a simple floral dress and has her hair tied into two pigtails, smiling innocently. She sits cross-legged, gently touching wildflowers beside her. The small donkeys appear sturdy, with perked ears looking curiously at the camera. Soft sunlight bathes the field, creating a warm and natural scene."
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: "Edge lighting, low contrast, medium close-up shot, left-heavy composition, clean single shot, warm colors, soft lighting, side lighting, daytime. A young girl sits in a field of tall grass with two fluffy donkeys behind her. The girl, around 11 or 12 years old, wears a simple floral dress and has her hair tied into two pigtails, smiling innocently. She sits cross-legged, gently touching wildflowers beside her. The small donkeys appear sturdy, with perked ears looking curiously at the camera. Soft sunlight bathes the field, creating a warm and natural scene."
INFO:modules.image_generator:Size: 512x512, Seed: 893532
INFO:modules.image_generator:Generating image 1/1 with seed 893532
Token indices sequence length is longer than the specified maximum sequence length for this model (127 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['tails, smiling innocently. she sits cross - legged, gently touching wildflowers beside her. the small donkeys appear sturdy, with perked ears looking curiously at the camera. soft sunlight bathes the field, creating a warm and natural scene."']
  0%|          | 0/28 [00:00<?, ?it/s]  4%|â–Ž         | 1/28 [00:08<03:39,  8.13s/it]  7%|â–‹         | 2/28 [00:10<02:10,  5.01s/it] 11%|â–ˆ         | 3/28 [00:13<01:39,  3.96s/it] 14%|â–ˆâ–        | 4/28 [00:16<01:23,  3.47s/it] 18%|â–ˆâ–Š        | 5/28 [00:19<01:14,  3.23s/it] 21%|â–ˆâ–ˆâ–       | 6/28 [00:21<01:07,  3.06s/it] 25%|â–ˆâ–ˆâ–Œ       | 7/28 [00:24<01:01,  2.95s/it] 29%|â–ˆâ–ˆâ–Š       | 8/28 [00:27<00:57,  2.88s/it] 32%|â–ˆâ–ˆâ–ˆâ–      | 9/28 [00:30<00:53,  2.84s/it] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 10/28 [00:32<00:50,  2.81s/it] 39%|â–ˆâ–ˆâ–ˆâ–‰      | 11/28 [00:35<00:47,  2.78s/it] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 12/28 [00:38<00:44,  2.78s/it] 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 13/28 [00:41<00:41,  2.77s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 14/28 [00:43<00:38,  2.76s/it] 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 15/28 [00:46<00:35,  2.74s/it] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 16/28 [00:49<00:32,  2.72s/it] 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 17/28 [00:51<00:29,  2.71s/it] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 18/28 [00:54<00:27,  2.71s/it] 68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 19/28 [00:57<00:24,  2.70s/it] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 20/28 [00:59<00:21,  2.71s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 21/28 [01:02<00:19,  2.72s/it] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 22/28 [01:05<00:16,  2.72s/it] 82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 23/28 [01:08<00:13,  2.73s/it] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 24/28 [01:10<00:10,  2.73s/it] 89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 25/28 [01:13<00:08,  2.74s/it] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 26/28 [01:16<00:05,  2.75s/it] 96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 27/28 [01:19<00:02,  2.75s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:21<00:00,  2.76s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:21<00:00,  2.93s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:59776 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:58526 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58530 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58542 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58554 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58568 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:51502 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:51516 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:51532 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:51540 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:51556 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58664 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58676 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58688 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58694 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58700 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35284 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35300 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35314 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35330 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35340 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58100 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58116 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58118 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58128 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:58138 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:47608 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:47612 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:47614 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:47616 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:47620 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:37112 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:37120 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:37136 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:37148 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:37158 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:39660 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:39676 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:39690 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:39698 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:39710 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35598 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35610 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35616 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35630 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:35632 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:45146 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:     127.0.0.1:45154 - "GET /task/progress/0489ba21-bacc-4f96-8ff3-d6d096f21fea HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: 0489ba21-bacc-4f96-8ff3-d6d096f21fea
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 49.85it/s]
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:00,  7.48it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.85it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.80it/s]
Loading pipeline components...:  29%|â–ˆâ–ˆâ–Š       | 2/7 [00:00<00:00,  6.15it/s]Loading pipeline components...:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 4/7 [00:00<00:00, 10.65it/s]Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00,  8.74it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:00<00:00,  9.14it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: ä¸€é“æ–°é²œçƒ¤åˆ¶çš„çƒ¤è‚‰ä¸²ç‰¹å†™ï¼Œé«˜åˆ†è¾¨çŽ‡å¾®è·æ‹æ‘„ï¼Œå±•çŽ°å‡ºå……æ»¡æ´»åŠ›çš„çº¢è¤è‰²é¦™æ–™è„†çš®ï¼Œé—ªçƒç€èŠ±ç”Ÿæ²¹çš„å…‰æ³½ã€‚ä¸²ä¸²é²œå«©çš„åˆ‡ç‰‡ç‰›è‚‰æˆ–é¸¡è‚‰ï¼Œè¾¹ç¼˜å¾®ç„¦ï¼Œæ’’ä¸ŠèŠ±ç”Ÿç¢Žã€è¾£æ¤’ç²‰å’ŒèŠ³é¦™é¦™æ–™çš„æ··åˆç‰©ã€‚çƒ­è‚‰å†’å‡ºè’¸æ±½ï¼Œå¢žå¼ºäº†çƒŸç†çš„é¦™æ°”ã€‚é‡‘é»„è‰²çš„èŠ±ç”Ÿç¢Žé»é™„åœ¨è¡¨é¢ï¼Œå¢žæ·»äº†è´¨æ„Ÿã€‚èƒŒæ™¯æ˜¯è´¨æœ´çš„æœ¨æ¿æˆ–ç¼–ç»‡åž«ï¼Œæ¸©æš–çš„æ¼«å°„å…‰çº¿æŠ•å°„å‡ºæŸ”å’Œçš„é˜´å½±ï¼Œä»¥çªå‡ºä¸°å¯Œçš„è‰²å½©ã€‚æ’’ä¸Šåˆ‡ç‰‡çš„æ´‹è‘±å’Œç•ªèŒ„ï¼Œå¢žæ·»äº†æ¸…çˆ½æ„Ÿï¼ŒèƒŒæ™¯ä¸­éšçº¦æœ‰çƒŸé›¾ç¼­ç»•ã€‚é£Žæ ¼ï¼šä¸°å¯Œã€è´¨æœ´çš„é£Ÿç‰©æ‘„å½±ï¼Œæµ…æ™¯æ·±ï¼Œä»¥å¼ºè°ƒå¤šæ±ã€è¾›è¾£çš„è‚‰
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:00<00:00,  1.06it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.23it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.20it/s]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: A high-resolution macro shot of freshly grilled skewered meat, with vibrant red-brown spice-coated crispy skin glistening with oil. Juicy slices of beef or chicken on the skewer, slightly charred edges, and a mix of crushed peanuts, chili powder, and aromatic spices sprinkled on top. Steam rises from the hot meat, enhancing the smoky aroma. Golden peanut bits adhere to the surface, adding texture. The background features rustic wooden planks or woven mats, with warm diffused lighting casting soft shadows to highlight the rich colors. Sliced onions and tomatoes are scattered around, adding freshness. Background smoke subtly drifts in the air. Style: Rich, rustic food photography, shallow depth of field to emphasize juicy, spicy meat.
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: ä¸€é“æ–°é²œçƒ¤åˆ¶çš„çƒ¤è‚‰ä¸²ç‰¹å†™ï¼Œé«˜åˆ†è¾¨çŽ‡å¾®è·æ‹æ‘„ï¼Œå±•çŽ°å‡ºå……æ»¡æ´»åŠ›çš„çº¢è¤è‰²é¦™æ–™è„†çš®ï¼Œé—ªçƒç€èŠ±ç”Ÿæ²¹çš„å…‰æ³½ã€‚ä¸²ä¸²é²œå«©çš„åˆ‡ç‰‡ç‰›è‚‰æˆ–é¸¡è‚‰ï¼Œè¾¹ç¼˜å¾®ç„¦ï¼Œæ’’ä¸ŠèŠ±ç”Ÿç¢Žã€è¾£æ¤’ç²‰å’ŒèŠ³é¦™é¦™æ–™çš„æ··åˆç‰©ã€‚çƒ­è‚‰å†’å‡ºè’¸æ±½ï¼Œå¢žå¼ºäº†çƒŸç†çš„é¦™æ°”ã€‚é‡‘é»„è‰²çš„èŠ±ç”Ÿç¢Žé»é™„åœ¨è¡¨é¢ï¼Œå¢žæ·»äº†è´¨æ„Ÿã€‚èƒŒæ™¯æ˜¯è´¨æœ´çš„æœ¨æ¿æˆ–ç¼–ç»‡åž«ï¼Œæ¸©æš–çš„æ¼«å°„å…‰çº¿æŠ•å°„å‡ºæŸ”å’Œçš„é˜´å½±ï¼Œä»¥çªå‡ºä¸°å¯Œçš„è‰²å½©ã€‚æ’’ä¸Šåˆ‡ç‰‡çš„æ´‹è‘±å’Œç•ªèŒ„ï¼Œå¢žæ·»äº†æ¸…çˆ½æ„Ÿï¼ŒèƒŒæ™¯ä¸­éšçº¦æœ‰çƒŸé›¾ç¼­ç»•ã€‚é£Žæ ¼ï¼šä¸°å¯Œã€è´¨æœ´çš„é£Ÿç‰©æ‘„å½±ï¼Œæµ…æ™¯æ·±ï¼Œä»¥å¼ºè°ƒå¤šæ±ã€è¾›è¾£çš„è‚‰
INFO:modules.image_generator:Optimized prompt: A high-resolution macro shot of freshly grilled skewered meat, with vibrant red-brown spice-coated crispy skin glistening with oil. Juicy slices of beef or chicken on the skewer, slightly charred edges, and a mix of crushed peanuts, chili powder, and aromatic spices sprinkled on top. Steam rises from the hot meat, enhancing the smoky aroma. Golden peanut bits adhere to the surface, adding texture. The background features rustic wooden planks or woven mats, with warm diffused lighting casting soft shadows to highlight the rich colors. Sliced onions and tomatoes are scattered around, adding freshness. Background smoke subtly drifts in the air. Style: Rich, rustic food photography, shallow depth of field to emphasize juicy, spicy meat.
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: A high-resolution macro shot of freshly grilled skewered meat, with vibrant red-brown spice-coated crispy skin glistening with oil. Juicy slices of beef or chicken on the skewer, slightly charred edges, and a mix of crushed peanuts, chili powder, and aromatic spices sprinkled on top. Steam rises from the hot meat, enhancing the smoky aroma. Golden peanut bits adhere to the surface, adding texture. The background features rustic wooden planks or woven mats, with warm diffused lighting casting soft shadows to highlight the rich colors. Sliced onions and tomatoes are scattered around, adding freshness. Background smoke subtly drifts in the air. Style: Rich, rustic food photography, shallow depth of field to emphasize juicy, spicy meat.
INFO:modules.image_generator:Size: 512x512, Seed: 363323
INFO:modules.image_generator:Generating image 1/1 with seed 363323
Token indices sequence length is longer than the specified maximum sequence length for this model (153 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['bits adhere to the surface, adding texture. the background features rustic wooden planks or woven mats, with warm diffused lighting casting soft shadows to highlight the rich colors. sliced onions and tomatoes are scattered around, adding freshness. background smoke subtly drifts in the air. style : rich, rustic food photography, shallow depth of field to emphasize juicy, spicy meat.']
  0%|          | 0/28 [00:00<?, ?it/s]  4%|â–Ž         | 1/28 [00:03<01:38,  3.63s/it]  7%|â–‹         | 2/28 [00:06<01:20,  3.10s/it] 11%|â–ˆ         | 3/28 [00:09<01:13,  2.94s/it] 14%|â–ˆâ–        | 4/28 [00:11<01:08,  2.86s/it] 18%|â–ˆâ–Š        | 5/28 [00:14<01:05,  2.83s/it] 21%|â–ˆâ–ˆâ–       | 6/28 [00:17<01:01,  2.81s/it] 25%|â–ˆâ–ˆâ–Œ       | 7/28 [00:20<00:58,  2.79s/it] 29%|â–ˆâ–ˆâ–Š       | 8/28 [00:22<00:55,  2.78s/it] 32%|â–ˆâ–ˆâ–ˆâ–      | 9/28 [00:25<00:52,  2.77s/it] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 10/28 [00:28<00:49,  2.76s/it] 39%|â–ˆâ–ˆâ–ˆâ–‰      | 11/28 [00:31<00:46,  2.74s/it] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 12/28 [00:33<00:43,  2.72s/it] 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 13/28 [00:36<00:40,  2.70s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 14/28 [00:39<00:37,  2.70s/it] 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 15/28 [00:41<00:35,  2.70s/it] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 16/28 [00:44<00:32,  2.71s/it] 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 17/28 [00:47<00:29,  2.72s/it] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 18/28 [00:50<00:27,  2.72s/it] 68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 19/28 [00:52<00:24,  2.72s/it] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 20/28 [00:55<00:21,  2.72s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 21/28 [00:58<00:19,  2.72s/it] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 22/28 [01:00<00:16,  2.72s/it] 82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 23/28 [01:03<00:13,  2.73s/it] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 24/28 [01:06<00:10,  2.73s/it] 89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 25/28 [01:09<00:08,  2.74s/it] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 26/28 [01:11<00:05,  2.75s/it] 96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 27/28 [01:14<00:02,  2.74s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:17<00:00,  2.73s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:17<00:00,  2.76s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:53294 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:37392 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37396 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37402 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37414 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37422 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54416 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54420 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54428 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54442 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54448 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37736 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37738 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37746 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37762 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:37776 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:33732 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:33738 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:33752 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:33760 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:33770 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:35706 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:35716 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:35730 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:35732 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:35742 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:59112 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:59120 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:59136 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:59144 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:59154 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:50572 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:50578 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:50588 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:50594 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:50610 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:36622 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:36636 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:36642 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:36648 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:36650 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54066 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54080 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54088 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:     127.0.0.1:54104 - "GET /task/progress/9d33038a-7a8d-4490-8d8f-b9dcdf354ade HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: 9d33038a-7a8d-4490-8d8f-b9dcdf354ade
INFO:     127.0.0.1:40862 - "GET /health HTTP/1.1" 200 OK
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 49.63it/s]
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:00,  7.72it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 26.40it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 26.34it/s]
Loading pipeline components...:  29%|â–ˆâ–ˆâ–Š       | 2/7 [00:00<00:00,  6.29it/s]Loading pipeline components...:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 4/7 [00:00<00:00, 10.94it/s]Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00,  8.86it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:00<00:00,  9.43it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: ä¸€æ¬¾ä»¥æ¨ªæ»¨å’Œç¥žå®¤ç”ºéœ“è™¹é—ªçƒçš„åœ°ä¸‹ä¸–ç•Œä¸ºèƒŒæ™¯çš„åŠ¨æ€åŠ¨ä½œè§’è‰²æ‰®æ¼”æ¸¸æˆï¼Œçµæ„Ÿæ¥è‡ªã€Šå¦‚é¾™7ï¼šå…‰ä¸Žæš—çš„åŽ»å‘ã€‹ã€‚èˆžå°ä¸­å¿ƒï¼šæ˜¥æ—¥ä¸€ç•ªï¼Œä¸€ä½ç²—çŠ·çš„å‰é»‘é“æˆå‘˜ï¼Œçº¢å‘ç‹‚é‡Žï¼Œè„¸ä¸Šå¸¦ç–¤ï¼Œæ„å¿—åšå®šï¼Œèº«ç€ç ´çƒ‚çš„è¥¿è£…ï¼Œéœ²å‡ºé¾™çº¹èº«ã€‚ä»–å‘¨å›´æ˜¯ä¸€ç¾¤æ‚ä¸ƒæ‚å…«çš„ä¼™ä¼´â€”â€”æœºæ™ºçš„çº±è‹±å­ï¼Œé«˜å¤§çš„è¶³ç«‹ï¼Œå¤æ€ªçš„éš¾æ³¢â€”â€”ç½®èº«äºŽç†™ç†™æ”˜æ”˜çš„è¡—é“ï¼ŒçƒŸé›¾å¼¥æ¼«çš„åŽå··å’Œå……æ»¡æ´»åŠ›çš„å¼¹ç åº—ä¸­ã€‚çªå‡ºæ˜¥æ—¥ä¸€ç•ªæ ‡å¿—æ€§çš„ç¼ ç€é“ä¸çš„æ£’çƒæ£’ï¼Œæ•£å‘ç€å¤¸å¼ çš„ã€Šå‹‡è€…æ–—æ¶é¾™ã€‹èˆ¬çš„æˆ˜æ–—æ•ˆæžœã€‚æ•æ‰æ¸¸æˆå°†ç²—çŠ·å†™å®žä¸»ä¹‰ä¸Žå¤¸å¼ å¹½é»˜ç›¸ç»“åˆçš„ç‰¹ç‚¹ï¼Œä»¥æˆå‰§åŒ–çš„ç¯å…‰ï¼Œé¥±å’Œçš„éœ“è™¹è‰²è°ƒå’Œç”µå½±èˆ¬çš„è¡—å¤´æ‰“æ–—èƒ½é‡ã€‚æƒ…ç»ªï¼šé«˜é£Žé™©ã€æ··ä¹±ï¼Œä½†åˆå‡ºå¥‡åœ°çœŸæŒš
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:00<00:00,  1.08it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.24it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.21it/s]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: A dynamic action role-playing game set in the neon-lit underground world of Yokohama and Shinsaibashi, inspired by "Ponkotsu 7: The Way of the Dragon". In the center: Shinra Ichiban, a rugged former gang member with wild red hair, scars on his face, and a determined resolve, dressed in tattered suits revealing a dragon tattoo. He is surrounded by a motley crewâ€”smart Kyouko Sashimi, towering Futsuki, and quirky Nakanoâ€”abuzzing in bustling streets, smoky alleyways, and lively arcade shops. Highlight Shinra Ichiban's iconic bat with wire wrapped around it, radiating exaggerated dragon-like battle effects. Capture the game's gritty realism combined with absurd humor through dramatic lighting, saturated neon tones, and cinematic street combat energy. Emotion: High risk, chaotic yet genuine.
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: ä¸€æ¬¾ä»¥æ¨ªæ»¨å’Œç¥žå®¤ç”ºéœ“è™¹é—ªçƒçš„åœ°ä¸‹ä¸–ç•Œä¸ºèƒŒæ™¯çš„åŠ¨æ€åŠ¨ä½œè§’è‰²æ‰®æ¼”æ¸¸æˆï¼Œçµæ„Ÿæ¥è‡ªã€Šå¦‚é¾™7ï¼šå…‰ä¸Žæš—çš„åŽ»å‘ã€‹ã€‚èˆžå°ä¸­å¿ƒï¼šæ˜¥æ—¥ä¸€ç•ªï¼Œä¸€ä½ç²—çŠ·çš„å‰é»‘é“æˆå‘˜ï¼Œçº¢å‘ç‹‚é‡Žï¼Œè„¸ä¸Šå¸¦ç–¤ï¼Œæ„å¿—åšå®šï¼Œèº«ç€ç ´çƒ‚çš„è¥¿è£…ï¼Œéœ²å‡ºé¾™çº¹èº«ã€‚ä»–å‘¨å›´æ˜¯ä¸€ç¾¤æ‚ä¸ƒæ‚å…«çš„ä¼™ä¼´â€”â€”æœºæ™ºçš„çº±è‹±å­ï¼Œé«˜å¤§çš„è¶³ç«‹ï¼Œå¤æ€ªçš„éš¾æ³¢â€”â€”ç½®èº«äºŽç†™ç†™æ”˜æ”˜çš„è¡—é“ï¼ŒçƒŸé›¾å¼¥æ¼«çš„åŽå··å’Œå……æ»¡æ´»åŠ›çš„å¼¹ç åº—ä¸­ã€‚çªå‡ºæ˜¥æ—¥ä¸€ç•ªæ ‡å¿—æ€§çš„ç¼ ç€é“ä¸çš„æ£’çƒæ£’ï¼Œæ•£å‘ç€å¤¸å¼ çš„ã€Šå‹‡è€…æ–—æ¶é¾™ã€‹èˆ¬çš„æˆ˜æ–—æ•ˆæžœã€‚æ•æ‰æ¸¸æˆå°†ç²—çŠ·å†™å®žä¸»ä¹‰ä¸Žå¤¸å¼ å¹½é»˜ç›¸ç»“åˆçš„ç‰¹ç‚¹ï¼Œä»¥æˆå‰§åŒ–çš„ç¯å…‰ï¼Œé¥±å’Œçš„éœ“è™¹è‰²è°ƒå’Œç”µå½±èˆ¬çš„è¡—å¤´æ‰“æ–—èƒ½é‡ã€‚æƒ…ç»ªï¼šé«˜é£Žé™©ã€æ··ä¹±ï¼Œä½†åˆå‡ºå¥‡åœ°çœŸæŒš
INFO:modules.image_generator:Optimized prompt: A dynamic action role-playing game set in the neon-lit underground world of Yokohama and Shinsaibashi, inspired by "Ponkotsu 7: The Way of the Dragon". In the center: Shinra Ichiban, a rugged former gang member with wild red hair, scars on his face, and a determined resolve, dressed in tattered suits revealing a dragon tattoo. He is surrounded by a motley crewâ€”smart Kyouko Sashimi, towering Futsuki, and quirky Nakanoâ€”abuzzing in bustling streets, smoky alleyways, and lively arcade shops. Highlight Shinra Ichiban's iconic bat with wire wrapped around it, radiating exaggerated dragon-like battle effects. Capture the game's gritty realism combined with absurd humor through dramatic lighting, saturated neon tones, and cinematic street combat energy. Emotion: High risk, chaotic yet genuine.
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: A dynamic action role-playing game set in the neon-lit underground world of Yokohama and Shinsaibashi, inspired by "Ponkotsu 7: The Way of the Dragon". In the center: Shinra Ichiban, a rugged former gang member with wild red hair, scars on his face, and a determined resolve, dressed in tattered suits revealing a dragon tattoo. He is surrounded by a motley crewâ€”smart Kyouko Sashimi, towering Futsuki, and quirky Nakanoâ€”abuzzing in bustling streets, smoky alleyways, and lively arcade shops. Highlight Shinra Ichiban's iconic bat with wire wrapped around it, radiating exaggerated dragon-like battle effects. Capture the game's gritty realism combined with absurd humor through dramatic lighting, saturated neon tones, and cinematic street combat energy. Emotion: High risk, chaotic yet genuine.
INFO:modules.image_generator:Size: 512x512, Seed: 72050
INFO:modules.image_generator:Generating image 1/1 with seed 72050
Token indices sequence length is longer than the specified maximum sequence length for this model (177 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: [". he is surrounded by a motley crew â€” smart kyouko sashimi, towering futsuki, and quirky nakano â€” abuzzing in bustling streets, smoky alleyways, and lively arcade shops. highlight shinra ichiban's iconic bat with wire wrapped around it, radiating exaggerated dragon - like battle effects. capture the game's gritty realism combined with absurd humor through dramatic lighting, saturated neon tones, and cinematic street combat energy. emotion : high risk, chaotic yet genuine."]
  0%|          | 0/28 [00:00<?, ?it/s]  4%|â–Ž         | 1/28 [00:03<01:40,  3.72s/it]  7%|â–‹         | 2/28 [00:06<01:22,  3.16s/it] 11%|â–ˆ         | 3/28 [00:09<01:14,  2.97s/it] 14%|â–ˆâ–        | 4/28 [00:11<01:09,  2.89s/it] 18%|â–ˆâ–Š        | 5/28 [00:14<01:05,  2.84s/it] 21%|â–ˆâ–ˆâ–       | 6/28 [00:17<01:02,  2.83s/it] 25%|â–ˆâ–ˆâ–Œ       | 7/28 [00:20<00:59,  2.81s/it] 29%|â–ˆâ–ˆâ–Š       | 8/28 [00:23<00:56,  2.81s/it] 32%|â–ˆâ–ˆâ–ˆâ–      | 9/28 [00:25<00:53,  2.81s/it] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 10/28 [00:28<00:50,  2.80s/it] 39%|â–ˆâ–ˆâ–ˆâ–‰      | 11/28 [00:31<00:47,  2.79s/it] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 12/28 [00:34<00:44,  2.78s/it] 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 13/28 [00:36<00:41,  2.77s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 14/28 [00:39<00:38,  2.78s/it] 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 15/28 [00:42<00:36,  2.79s/it] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 16/28 [00:45<00:33,  2.79s/it] 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 17/28 [00:48<00:30,  2.79s/it] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 18/28 [00:50<00:27,  2.79s/it] 68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 19/28 [00:53<00:25,  2.78s/it] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 20/28 [00:56<00:22,  2.77s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 21/28 [00:59<00:19,  2.77s/it] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 22/28 [01:01<00:16,  2.76s/it] 82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 23/28 [01:04<00:13,  2.76s/it] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 24/28 [01:07<00:10,  2.75s/it] 89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 25/28 [01:10<00:08,  2.74s/it] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 26/28 [01:12<00:05,  2.74s/it] 96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 27/28 [01:15<00:02,  2.75s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:18<00:00,  2.75s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:18<00:00,  2.80s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:44600 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:44608 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44624 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44634 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44646 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46646 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46654 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46662 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46674 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46680 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54512 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54528 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54532 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54544 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54554 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45520 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45524 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45526 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45536 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45552 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47500 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47510 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47524 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47538 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47542 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40622 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40626 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40638 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40642 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40648 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46724 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46732 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46738 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46752 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46756 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43034 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43042 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43050 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43060 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43070 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57336 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57338 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57352 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57358 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57372 - "GET /task/progress/51d9eab9-5595-4f4a-ba94-81b47d584a27 HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: 51d9eab9-5595-4f4a-ba94-81b47d584a27
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 43.84it/s]
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:00,  7.43it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 26.44it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 26.38it/s]
Loading pipeline components...:  29%|â–ˆâ–ˆâ–Š       | 2/7 [00:00<00:00,  6.21it/s]Loading pipeline components...:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 4/7 [00:00<00:00, 10.65it/s]Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00,  8.68it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:00<00:00,  9.24it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: A serene lakeside scene at sunset, with mountains in the background, soft warm lighting, ultra-detailed, photorealistic, 8k resolution
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:00<00:00,  1.07it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.24it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.21it/s]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: A serene lakeside sunset scene featuring distant mountains, warm golden and orange hues illuminating the sky and water, soft shadows creating depth, ultra-detailed textures of reflective water and rocky terrain, photorealistic rendering for realism, high-resolution 8K image quality.
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: A serene lakeside scene at sunset, with mountains in the background, soft warm lighting, ultra-detailed, photorealistic, 8k resolution
INFO:modules.image_generator:Optimized prompt: A serene lakeside sunset scene featuring distant mountains, warm golden and orange hues illuminating the sky and water, soft shadows creating depth, ultra-detailed textures of reflective water and rocky terrain, photorealistic rendering for realism, high-resolution 8K image quality.
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: A serene lakeside sunset scene featuring distant mountains, warm golden and orange hues illuminating the sky and water, soft shadows creating depth, ultra-detailed textures of reflective water and rocky terrain, photorealistic rendering for realism, high-resolution 8K image quality.
INFO:modules.image_generator:Size: 512x512, Seed: 941816
INFO:modules.image_generator:Generating image 1/1 with seed 941816
  0%|          | 0/28 [00:00<?, ?it/s]  4%|â–Ž         | 1/28 [00:03<01:38,  3.63s/it]  7%|â–‹         | 2/28 [00:06<01:20,  3.09s/it] 11%|â–ˆ         | 3/28 [00:09<01:12,  2.92s/it] 14%|â–ˆâ–        | 4/28 [00:11<01:08,  2.84s/it] 18%|â–ˆâ–Š        | 5/28 [00:14<01:04,  2.79s/it] 21%|â–ˆâ–ˆâ–       | 6/28 [00:17<01:01,  2.78s/it] 25%|â–ˆâ–ˆâ–Œ       | 7/28 [00:19<00:58,  2.77s/it] 29%|â–ˆâ–ˆâ–Š       | 8/28 [00:22<00:55,  2.77s/it] 32%|â–ˆâ–ˆâ–ˆâ–      | 9/28 [00:25<00:52,  2.75s/it] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 10/28 [00:28<00:49,  2.74s/it] 39%|â–ˆâ–ˆâ–ˆâ–‰      | 11/28 [00:30<00:46,  2.74s/it] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 12/28 [00:33<00:43,  2.73s/it] 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 13/28 [00:36<00:41,  2.74s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 14/28 [00:39<00:38,  2.74s/it] 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 15/28 [00:41<00:35,  2.74s/it] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 16/28 [00:44<00:32,  2.74s/it] 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 17/28 [00:47<00:30,  2.74s/it] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 18/28 [00:50<00:27,  2.73s/it] 68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 19/28 [00:52<00:24,  2.71s/it] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 20/28 [00:55<00:21,  2.69s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 21/28 [00:58<00:18,  2.69s/it] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 22/28 [01:00<00:16,  2.68s/it] 82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 23/28 [01:03<00:13,  2.69s/it] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 24/28 [01:06<00:10,  2.70s/it] 89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 25/28 [01:08<00:08,  2.71s/it] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 26/28 [01:11<00:05,  2.71s/it] 96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 27/28 [01:14<00:02,  2.71s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:17<00:00,  2.72s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:17<00:00,  2.75s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:52860 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:52874 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:52884 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:52890 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:52902 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:45606 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:45618 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:45624 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:45640 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:45654 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:44912 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:44914 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:44918 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:44924 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:44936 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:40094 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:40106 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:40108 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:40112 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:40122 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:49710 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:49724 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:49740 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:49752 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:49764 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:43358 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:43362 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:43366 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:43378 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:43390 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:52104 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:52112 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:52116 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:52132 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:52134 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:41864 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:41876 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:41892 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:41894 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:41898 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:34748 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:34758 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:     127.0.0.1:34774 - "GET /task/progress/bdb3cb37-01f0-4af0-b1bd-d5401344585d HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: bdb3cb37-01f0-4af0-b1bd-d5401344585d
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 48.15it/s]
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:00,  7.65it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.86it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.80it/s]
Loading pipeline components...:  29%|â–ˆâ–ˆâ–Š       | 2/7 [00:00<00:00,  6.20it/s]Loading pipeline components...:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 4/7 [00:00<00:00, 10.79it/s]Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00,  8.76it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:00<00:00,  9.27it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: A tiny red dragon sleeps curled up in a nest on a medieval wizard's table]. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, the soft focus captures [the cozy morning light filtering through a near by window]. The pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a DnD RPG setting. The image is rendered in 16K and 8K, highlighting [the intricate details and medieval charm
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:00<00:00,  1.04it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.21it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.18it/s]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: "A tiny red dragon curls up in a medieval-style nest on a wizard's table, shot with a macro lens at f/2.8 using a Canon EOSR5 camera. Soft focus captures the cozy morning light filtering through nearby windows, creating an enchanting atmosphere reminiscent of a Dungeons & Dragons RPG setting. The image features pastel colors and whimsical steam shapes that add to the serene ambiance. Rendered in stunning 16K and 8K resolution, this image highlights intricate details and medieval charm."
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: A tiny red dragon sleeps curled up in a nest on a medieval wizard's table]. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, the soft focus captures [the cozy morning light filtering through a near by window]. The pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a DnD RPG setting. The image is rendered in 16K and 8K, highlighting [the intricate details and medieval charm
INFO:modules.image_generator:Optimized prompt: "A tiny red dragon curls up in a medieval-style nest on a wizard's table, shot with a macro lens at f/2.8 using a Canon EOSR5 camera. Soft focus captures the cozy morning light filtering through nearby windows, creating an enchanting atmosphere reminiscent of a Dungeons & Dragons RPG setting. The image features pastel colors and whimsical steam shapes that add to the serene ambiance. Rendered in stunning 16K and 8K resolution, this image highlights intricate details and medieval charm."
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: "A tiny red dragon curls up in a medieval-style nest on a wizard's table, shot with a macro lens at f/2.8 using a Canon EOSR5 camera. Soft focus captures the cozy morning light filtering through nearby windows, creating an enchanting atmosphere reminiscent of a Dungeons & Dragons RPG setting. The image features pastel colors and whimsical steam shapes that add to the serene ambiance. Rendered in stunning 16K and 8K resolution, this image highlights intricate details and medieval charm."
INFO:modules.image_generator:Size: 512x512, Seed: 310148
INFO:modules.image_generator:Generating image 1/1 with seed 310148
Token indices sequence length is longer than the specified maximum sequence length for this model (103 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['to the serene ambiance. rendered in stunning 1 6 k and 8 k resolution, this image highlights intricate details and medieval charm."']
  0%|          | 0/28 [00:00<?, ?it/s]  4%|â–Ž         | 1/28 [00:03<01:39,  3.69s/it]  7%|â–‹         | 2/28 [00:06<01:22,  3.17s/it] 11%|â–ˆ         | 3/28 [00:09<01:14,  2.99s/it]INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
 14%|â–ˆâ–        | 4/28 [00:12<01:09,  2.91s/it] 18%|â–ˆâ–Š        | 5/28 [00:14<01:05,  2.86s/it] 21%|â–ˆâ–ˆâ–       | 6/28 [00:17<01:02,  2.84s/it] 25%|â–ˆâ–ˆâ–Œ       | 7/28 [00:20<00:59,  2.81s/it] 29%|â–ˆâ–ˆâ–Š       | 8/28 [00:23<00:55,  2.79s/it] 32%|â–ˆâ–ˆâ–ˆâ–      | 9/28 [00:25<00:52,  2.78s/it] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 10/28 [00:28<00:49,  2.77s/it] 39%|â–ˆâ–ˆâ–ˆâ–‰      | 11/28 [00:31<00:47,  2.77s/it] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 12/28 [00:34<00:44,  2.78s/it] 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 13/28 [00:37<00:41,  2.78s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 14/28 [00:39<00:39,  2.79s/it] 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 15/28 [00:42<00:36,  2.78s/it] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 16/28 [00:45<00:33,  2.75s/it] 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 17/28 [00:47<00:30,  2.73s/it] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 18/28 [00:50<00:27,  2.72s/it] 68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 19/28 [00:53<00:24,  2.72s/it] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 20/28 [00:56<00:21,  2.74s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 21/28 [00:58<00:19,  2.75s/it] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 22/28 [01:01<00:16,  2.77s/it] 82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 23/28 [01:04<00:13,  2.76s/it] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 24/28 [01:07<00:11,  2.76s/it] 89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 25/28 [01:09<00:08,  2.76s/it] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 26/28 [01:12<00:05,  2.76s/it] 96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 27/28 [01:15<00:02,  2.77s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:18<00:00,  2.77s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:18<00:00,  2.80s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:54384 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [4764]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [71724]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:45112 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:45116 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:45126 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:45138 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:51090 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:51102 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:51106 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:51122 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:51126 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:43722 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:43724 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:43728 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:43742 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:43758 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:46964 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:46968 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:46982 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:46990 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:46998 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34764 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34766 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34774 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34790 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34794 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34112 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34124 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34140 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34146 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34154 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34092 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34096 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34108 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34114 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:34122 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:53804 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:53808 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:53816 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:53826 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:53842 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:38776 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:38790 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:     127.0.0.1:38804 - "GET /task/progress/5663cc43-7e04-4e9d-ac53-945acfd0b47e HTTP/1.1" 200 OK
INFO:modules.image_generator:FLUX model path configured: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
INFO:api_server:ImageGenerator initialized on demand
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]You set `add_prefix_space`. The tokenizer needs to be converted from the slow tokenizers
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:02,  2.16it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 51.57it/s]
Loading pipeline components...:  43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 3/7 [00:00<00:00,  5.65it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 26.01it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.96it/s]
Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00,  7.23it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:01<00:00,  6.98it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: A tiny red dragon sleeps curled up in a nest on a medieval wizard's table]. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, the soft focus captures [the cozy morning light filtering through a near by window]. The pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a DnD RPG setting. The image is rendered in 16K and 8K, highlighting [the intricate details and medieval charm
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:00<00:00,  1.10it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.26it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.23it/s]
The image processor of type `Qwen2VLImageProcessor` is now loaded as a fast processor by default, even if the model checkpoint was saved with a slow processor. This is a breaking change and may produce slightly different outputs. To continue using the slow processor, instantiate this class with `use_fast=False`. Note that this behavior will be extended to all models in a future release.
You have video processor config saved in `preprocessor.json` file which is deprecated. Video processor configs should be saved in their own `video_preprocessor.json` file. You can rename the file or load and save the processor back which renames it automatically. Loading from `preprocessor.json` will be removed in v5.0.
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: "A tiny red dragon sleeps curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm) using a Canon EOSR5, capturing the soft focus of cozy morning light filtering through a nearby window. Pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a D&D RPG setting. Rendered in 16K and 8K to highlight intricate details and medieval charm."
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: A tiny red dragon sleeps curled up in a nest on a medieval wizard's table]. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, the soft focus captures [the cozy morning light filtering through a near by window]. The pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a DnD RPG setting. The image is rendered in 16K and 8K, highlighting [the intricate details and medieval charm
INFO:modules.image_generator:Optimized prompt: "A tiny red dragon sleeps curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm) using a Canon EOSR5, capturing the soft focus of cozy morning light filtering through a nearby window. Pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a D&D RPG setting. Rendered in 16K and 8K to highlight intricate details and medieval charm."
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: "A tiny red dragon sleeps curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm) using a Canon EOSR5, capturing the soft focus of cozy morning light filtering through a nearby window. Pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a D&D RPG setting. Rendered in 16K and 8K to highlight intricate details and medieval charm."
INFO:modules.image_generator:Size: 1024x1024, Seed: 42
INFO:modules.image_generator:Generating image 1/1 with seed 42
Token indices sequence length is longer than the specified maximum sequence length for this model (94 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['. rendered in 1 6 k and 8 k to highlight intricate details and medieval charm."']
  0%|          | 0/28 [00:00<?, ?it/s]  4%|â–Ž         | 1/28 [00:04<01:56,  4.30s/it]  7%|â–‹         | 2/28 [00:07<01:34,  3.63s/it] 11%|â–ˆ         | 3/28 [00:10<01:25,  3.42s/it] 14%|â–ˆâ–        | 4/28 [00:13<01:19,  3.32s/it] 18%|â–ˆâ–Š        | 5/28 [00:16<01:14,  3.26s/it] 21%|â–ˆâ–ˆâ–       | 6/28 [00:20<01:10,  3.23s/it] 25%|â–ˆâ–ˆâ–Œ       | 7/28 [00:23<01:07,  3.20s/it] 29%|â–ˆâ–ˆâ–Š       | 8/28 [00:26<01:03,  3.19s/it] 32%|â–ˆâ–ˆâ–ˆâ–      | 9/28 [00:29<01:02,  3.27s/it] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 10/28 [00:33<00:59,  3.31s/it] 39%|â–ˆâ–ˆâ–ˆâ–‰      | 11/28 [00:36<00:55,  3.28s/it] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 12/28 [00:39<00:51,  3.24s/it] 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 13/28 [00:42<00:48,  3.21s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 14/28 [00:45<00:44,  3.20s/it] 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 15/28 [00:49<00:42,  3.25s/it] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 16/28 [00:52<00:39,  3.30s/it] 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 17/28 [00:56<00:37,  3.36s/it] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 18/28 [00:59<00:33,  3.38s/it] 68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 19/28 [01:02<00:29,  3.32s/it] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 20/28 [01:05<00:26,  3.27s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 21/28 [01:09<00:22,  3.22s/it] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 22/28 [01:12<00:19,  3.19s/it] 82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 23/28 [01:15<00:16,  3.26s/it] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 24/28 [01:19<00:13,  3.32s/it] 89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 25/28 [01:22<00:10,  3.38s/it] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 26/28 [01:26<00:06,  3.40s/it] 96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 27/28 [01:29<00:03,  3.32s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:32<00:00,  3.28s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:32<00:00,  3.30s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:60512 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:60516 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60518 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60520 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60534 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56348 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56354 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56360 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56362 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56378 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47552 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47564 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47580 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47596 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47604 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38504 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38518 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38526 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38534 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38544 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48724 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48736 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48738 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48740 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48748 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45874 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45884 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45894 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45906 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45914 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46640 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46650 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46666 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46680 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46684 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45674 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45676 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45682 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45696 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45706 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34200 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34210 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34214 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34216 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34222 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48866 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48876 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48890 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48900 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48912 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37852 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37860 - "GET /task/progress/0811b985-5c11-40ca-8e82-a32b86e720d3 HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: 0811b985-5c11-40ca-8e82-a32b86e720d3
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:01,  3.04it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 53.22it/s]
Loading pipeline components...:  43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 3/7 [00:00<00:00,  7.29it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 23.63it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 23.58it/s]
Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00,  9.48it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:00<00:00,  9.13it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: A tiny red dragon sleeps curled up in a nest on a medieval wizard's table]. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, the soft focus captures [the cozy morning light filtering through a near by window]. The pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a DnD RPG setting. The image is rendered in 16K and 8K, highlighting [the intricate details and medieval charm
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:00<00:00,  1.08it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.23it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.21it/s]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: "A tiny red dragon curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm), Canon EOSR5, capturing the soft focus of cozy morning light filtering through nearby windows. Pastel colors and whimsical steam shapes create a serene atmosphere reminiscent of a Dungeons & Dragons RPG setting. Rendered in 16K and 8K to highlight intricate details and medieval charm."
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: A tiny red dragon sleeps curled up in a nest on a medieval wizard's table]. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, the soft focus captures [the cozy morning light filtering through a near by window]. The pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a DnD RPG setting. The image is rendered in 16K and 8K, highlighting [the intricate details and medieval charm
INFO:modules.image_generator:Optimized prompt: "A tiny red dragon curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm), Canon EOSR5, capturing the soft focus of cozy morning light filtering through nearby windows. Pastel colors and whimsical steam shapes create a serene atmosphere reminiscent of a Dungeons & Dragons RPG setting. Rendered in 16K and 8K to highlight intricate details and medieval charm."
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: "A tiny red dragon curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm), Canon EOSR5, capturing the soft focus of cozy morning light filtering through nearby windows. Pastel colors and whimsical steam shapes create a serene atmosphere reminiscent of a Dungeons & Dragons RPG setting. Rendered in 16K and 8K to highlight intricate details and medieval charm."
INFO:modules.image_generator:Size: 768x1024, Seed: 42
INFO:modules.image_generator:Generating image 1/1 with seed 42
Token indices sequence length is longer than the specified maximum sequence length for this model (89 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['k and 8 k to highlight intricate details and medieval charm."']
  0%|          | 0/28 [00:00<?, ?it/s]  4%|â–Ž         | 1/28 [00:03<01:43,  3.83s/it]  7%|â–‹         | 2/28 [00:07<01:29,  3.45s/it] 11%|â–ˆ         | 3/28 [00:10<01:22,  3.31s/it] 14%|â–ˆâ–        | 4/28 [00:13<01:15,  3.15s/it] 18%|â–ˆâ–Š        | 5/28 [00:16<01:12,  3.15s/it] 21%|â–ˆâ–ˆâ–       | 6/28 [00:19<01:07,  3.08s/it] 25%|â–ˆâ–ˆâ–Œ       | 7/28 [00:22<01:05,  3.12s/it] 29%|â–ˆâ–ˆâ–Š       | 8/28 [00:25<01:01,  3.08s/it] 32%|â–ˆâ–ˆâ–ˆâ–      | 9/28 [00:28<00:59,  3.12s/it] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 10/28 [00:31<00:55,  3.08s/it] 39%|â–ˆâ–ˆâ–ˆâ–‰      | 11/28 [00:34<00:53,  3.13s/it] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 12/28 [00:37<00:49,  3.08s/it] 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 13/28 [00:41<00:46,  3.13s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 14/28 [00:43<00:43,  3.08s/it] 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 15/28 [00:47<00:40,  3.11s/it] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 16/28 [00:50<00:36,  3.08s/it] 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 17/28 [00:53<00:34,  3.13s/it] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 18/28 [00:56<00:30,  3.09s/it] 68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 19/28 [00:59<00:28,  3.14s/it] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 20/28 [01:02<00:24,  3.09s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 21/28 [01:05<00:21,  3.13s/it] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 22/28 [01:08<00:18,  3.09s/it] 82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 23/28 [01:12<00:15,  3.12s/it] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 24/28 [01:15<00:12,  3.08s/it] 89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 25/28 [01:18<00:09,  3.16s/it] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 26/28 [01:21<00:06,  3.14s/it] 96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 27/28 [01:24<00:03,  3.24s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:28<00:00,  3.22s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:28<00:00,  3.15s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:53862 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:53876 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53878 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53894 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39562 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39564 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39568 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39584 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39594 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58752 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58768 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58782 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58794 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58800 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33642 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33650 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33666 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33672 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33676 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33572 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33578 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33592 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33604 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33618 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54266 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54280 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54286 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54292 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54294 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:36914 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:36926 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:36940 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:36942 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:36948 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33268 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33278 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33290 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33300 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33308 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45134 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45150 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45154 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45160 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45172 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43760 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43768 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43776 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43784 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43786 - "GET /task/progress/9f3f2a10-2922-4d64-9217-1f53825cac80 HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: 9f3f2a10-2922-4d64-9217-1f53825cac80
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:01,  3.02it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 58.16it/s]
Loading pipeline components...:  43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 3/7 [00:00<00:00,  7.28it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.89it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.83it/s]
Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00,  9.73it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:00<00:00,  9.28it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: A tiny red dragon sleeps curled up in a nest on a medieval wizard's table]. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, the soft focus captures [the cozy morning light filtering through a near by window]. The pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a DnD RPG setting. The image is rendered in 16K and 8K, highlighting [the intricate details and medieval charm
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:02<00:02,  2.15s/it]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:03<00:00,  1.87s/it]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:03<00:00,  1.92s/it]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: "A tiny red dragon sleeping curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, capturing the soft focus of [cozy morning light filtering through a nearby window]. Pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a D&D RPG setting. Rendered in 16K and 8K, highlighting intricate details and medieval charm."
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: A tiny red dragon sleeps curled up in a nest on a medieval wizard's table]. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, the soft focus captures [the cozy morning light filtering through a near by window]. The pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a DnD RPG setting. The image is rendered in 16K and 8K, highlighting [the intricate details and medieval charm
INFO:modules.image_generator:Optimized prompt: "A tiny red dragon sleeping curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, capturing the soft focus of [cozy morning light filtering through a nearby window]. Pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a D&D RPG setting. Rendered in 16K and 8K, highlighting intricate details and medieval charm."
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: "A tiny red dragon sleeping curled up in a nest on a medieval wizard's table. Shot with a macro lens (f/2.8, 50mm) and a Canon EOSR5, capturing the soft focus of [cozy morning light filtering through a nearby window]. Pastel colors and whimsical steam shapes enhance the serene atmosphere, evoking a D&D RPG setting. Rendered in 16K and 8K, highlighting intricate details and medieval charm."
INFO:modules.image_generator:Size: 768x1024, Seed: 42
INFO:modules.image_generator:Generating image 1/1 with seed 42
Token indices sequence length is longer than the specified maximum sequence length for this model (95 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['setting. rendered in 1 6 k and 8 k, highlighting intricate details and medieval charm."']
  0%|          | 0/28 [00:00<?, ?it/s]  4%|â–Ž         | 1/28 [00:03<01:43,  3.84s/it]  7%|â–‹         | 2/28 [00:07<01:30,  3.48s/it] 11%|â–ˆ         | 3/28 [00:10<01:23,  3.34s/it] 14%|â–ˆâ–        | 4/28 [00:13<01:16,  3.19s/it] 18%|â–ˆâ–Š        | 5/28 [00:16<01:14,  3.24s/it] 21%|â–ˆâ–ˆâ–       | 6/28 [00:19<01:09,  3.16s/it] 25%|â–ˆâ–ˆâ–Œ       | 7/28 [00:22<01:07,  3.19s/it] 29%|â–ˆâ–ˆâ–Š       | 8/28 [00:25<01:02,  3.13s/it] 32%|â–ˆâ–ˆâ–ˆâ–      | 9/28 [00:29<01:00,  3.17s/it] 36%|â–ˆâ–ˆâ–ˆâ–Œ      | 10/28 [00:32<00:55,  3.11s/it] 39%|â–ˆâ–ˆâ–ˆâ–‰      | 11/28 [00:35<00:53,  3.14s/it] 43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 12/28 [00:38<00:49,  3.08s/it] 46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 13/28 [00:41<00:46,  3.12s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 14/28 [00:44<00:42,  3.06s/it] 54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 15/28 [00:47<00:40,  3.10s/it] 57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 16/28 [00:50<00:36,  3.06s/it] 61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 17/28 [00:53<00:34,  3.12s/it] 64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 18/28 [00:56<00:30,  3.08s/it] 68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 19/28 [00:59<00:28,  3.11s/it] 71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 20/28 [01:02<00:24,  3.07s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 21/28 [01:06<00:21,  3.12s/it] 79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 22/28 [01:09<00:18,  3.07s/it] 82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 23/28 [01:12<00:15,  3.13s/it] 86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 24/28 [01:15<00:12,  3.10s/it] 89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 25/28 [01:18<00:09,  3.15s/it] 93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 26/28 [01:21<00:06,  3.11s/it] 96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 27/28 [01:24<00:03,  3.14s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:27<00:00,  3.09s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28/28 [01:27<00:00,  3.14s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:58836 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:52768 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:52770 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:52782 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:52794 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:52806 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:57280 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:57292 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:57296 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:57304 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:57312 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:33914 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:33918 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:33920 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:33922 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:33932 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:46822 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:46832 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:46844 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:46846 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:46860 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:55260 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:55262 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:55278 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:55288 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:34682 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:34690 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:34700 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:34708 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:34712 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:54110 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:54126 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:54134 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:54142 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:48826 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:48828 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:48842 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:48856 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:48868 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:47236 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:47252 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:47264 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:47272 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:47282 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:55980 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:55982 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:55988 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:56002 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:     127.0.0.1:56018 - "GET /task/progress/f07634b7-1393-4c76-8be5-fda7bbd95f7c HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: f07634b7-1393-4c76-8be5-fda7bbd95f7c
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [71724]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [96247]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [96247]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [97135]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [97135]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [98154]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [98154]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [99276]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [99276]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 215
    infere
    ^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [99732]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [99732]
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [100109]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [100109]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 253
    inference_steps = inference_steps
                      
SyntaxError: invalid syntax. Perhaps you forgot a comma?
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [100893]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [100893]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [101439]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [101439]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [101670]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [101670]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [107741]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [107741]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [108035]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [108035]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [108444]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [108444]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 253
    num_inference_steps = inference_steps,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: keyword argument repeated: num_inference_steps
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [110397]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [110397]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [112730]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [112730]
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [113198]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [113198]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [116486]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [116486]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136
    inference_steps: int = 20, CFG_scale: int = 7.5
                                                
SyntaxError: invalid syntax. Perhaps you forgot a comma?
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 245
    ).images[0]
    ^
SyntaxError: positional argument follows keyword argument
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 216
    progress_callback: Optional[callable] = None) -> List[str]:
    ^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 215
    inference_steps: int = 20, CFG_scale: int =7.0
                                               
SyntaxError: invalid syntax. Perhaps you forgot a comma?
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 245
    guidance_scale=CFG_scale,
                  ^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 245
    gen
    ^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax. Perhaps you forgot a comma?
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 35, in <module>
    class ImageGenerator:
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136, in ImageGenerator
    inference_steps: int = 20, CFG_scale: int = 7.5 if negative_prompt else 2.0,
NameError: name 'negative_prompt' is not defined
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 289, in run_path
    return _run_module_code(code, init_globals, run_name,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 96, in _run_module_code
    _run_code(code, mod_globals, init_globals,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 20, in <module>
    from modules.image_generator import ImageGenerator
  File "/root/autodl-tmp/EasyVideo/ai-service/modules/image_generator.py", line 136
    inference_steps: int = 20, CFG_scale: int = 7.5
                                                
SyntaxError: invalid syntax. Perhaps you forgot a comma?
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [130750]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [130750]
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [135390]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [135390]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [135738]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'modules/image_generator.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [135738]
INFO:watchfiles.main:3 changes detected
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [136055]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [136055]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [140978]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [140978]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [141588]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [141588]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [142077]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [142077]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [142222]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [142222]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [143057]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'test_image_gen.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [143057]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [146226]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:1 change detected
INFO:modules.image_generator:FLUX model path configured: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
INFO:api_server:ImageGenerator initialized on demand
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:01,  3.25it/s]You set `add_prefix_space`. The tokenizer needs to be converted from the slow tokenizers
Loading pipeline components...:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 4/7 [00:00<00:00,  6.35it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.60it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.54it/s]
Loading pipeline components...:  71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 5/7 [00:00<00:00,  6.10it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 52.74it/s]
Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:01<00:00,  8.00it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:01<00:00,  6.94it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: A photograph from [the opening of the Eiffel Tower in Paris in 1889] captures the monumental occasion with a grand, historic ambiance. The image shows [the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline]. Crowds of people, dressed in late 19th-century attire, are gathered around, marveling at the iconic new landmark. The photograph exudes a sense of excitement and wonder as [Parisians celebrate the unveiling of this groundbreaking architectural feat].
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:01<00:01,  1.00s/it]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.13it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.10it/s]
The image processor of type `Qwen2VLImageProcessor` is now loaded as a fast processor by default, even if the model checkpoint was saved with a slow processor. This is a breaking change and may produce slightly different outputs. To continue using the slow processor, instantiate this class with `use_fast=False`. Note that this behavior will be extended to all models in a future release.
You have video processor config saved in `preprocessor.json` file which is deprecated. Video processor configs should be saved in their own `video_preprocessor.json` file. You can rename the file or load and save the processor back which renames it automatically. Loading from `preprocessor.json` will be removed in v5.0.
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: "A photograph from the opening of the Eiffel Tower in Paris in 1889 captures the monumental occasion with a grand, historic ambiance. The image showcases the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline. The photograph features crowds of people dressed in late 19th-century attire, marveling at the iconic new landmark. The scene is filled with vibrant colors and intricate details, including the shimmering iron surface, the bustling cityscape, and the excited faces of the crowd. High resolution and realistic textures bring the entire scene to life."
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: A photograph from [the opening of the Eiffel Tower in Paris in 1889] captures the monumental occasion with a grand, historic ambiance. The image shows [the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline]. Crowds of people, dressed in late 19th-century attire, are gathered around, marveling at the iconic new landmark. The photograph exudes a sense of excitement and wonder as [Parisians celebrate the unveiling of this groundbreaking architectural feat].
INFO:modules.image_generator:Optimized prompt: "A photograph from the opening of the Eiffel Tower in Paris in 1889 captures the monumental occasion with a grand, historic ambiance. The image showcases the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline. The photograph features crowds of people dressed in late 19th-century attire, marveling at the iconic new landmark. The scene is filled with vibrant colors and intricate details, including the shimmering iron surface, the bustling cityscape, and the excited faces of the crowd. High resolution and realistic textures bring the entire scene to life."
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: "A photograph from the opening of the Eiffel Tower in Paris in 1889 captures the monumental occasion with a grand, historic ambiance. The image showcases the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline. The photograph features crowds of people dressed in late 19th-century attire, marveling at the iconic new landmark. The scene is filled with vibrant colors and intricate details, including the shimmering iron surface, the bustling cityscape, and the excited faces of the crowd. High resolution and realistic textures bring the entire scene to life."
INFO:modules.image_generator:Size: 768x1024, Seed: 42
INFO:modules.image_generator:Generating image 1/1 with seed 42
Token indices sequence length is longer than the specified maximum sequence length for this model (120 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['the scene is filled with vibrant colors and intricate details, including the shimmering iron surface, the bustling cityscape, and the excited faces of the crowd. high resolution and realistic textures bring the entire scene to life."']
  0%|          | 0/20 [00:00<?, ?it/s]  5%|â–Œ         | 1/20 [00:03<01:13,  3.85s/it] 10%|â–ˆ         | 2/20 [00:07<01:02,  3.47s/it] 15%|â–ˆâ–Œ        | 3/20 [00:10<00:56,  3.33s/it] 20%|â–ˆâ–ˆ        | 4/20 [00:13<00:50,  3.18s/it] 25%|â–ˆâ–ˆâ–Œ       | 5/20 [00:16<00:47,  3.18s/it] 30%|â–ˆâ–ˆâ–ˆ       | 6/20 [00:19<00:43,  3.10s/it] 35%|â–ˆâ–ˆâ–ˆâ–Œ      | 7/20 [00:22<00:40,  3.13s/it] 40%|â–ˆâ–ˆâ–ˆâ–ˆ      | 8/20 [00:25<00:36,  3.06s/it] 45%|â–ˆâ–ˆâ–ˆâ–ˆâ–Œ     | 9/20 [00:28<00:34,  3.11s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 10/20 [00:31<00:30,  3.06s/it] 55%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ    | 11/20 [00:34<00:27,  3.09s/it] 60%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 12/20 [00:37<00:24,  3.05s/it] 65%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ   | 13/20 [00:40<00:21,  3.09s/it] 70%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   | 14/20 [00:43<00:18,  3.06s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 15/20 [00:47<00:15,  3.10s/it] 80%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 16/20 [00:49<00:12,  3.04s/it] 85%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 17/20 [00:53<00:09,  3.08s/it] 90%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 18/20 [00:56<00:06,  3.03s/it] 95%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ| 19/20 [00:59<00:03,  3.07s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 20/20 [01:02<00:00,  3.03s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 20/20 [01:02<00:00,  3.11s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:39848 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:39852 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39858 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58902 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58904 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58910 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58914 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58928 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52164 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52178 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52190 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52198 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52206 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56092 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56100 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56106 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56112 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56114 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50834 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50850 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50856 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50872 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50888 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55538 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55540 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55554 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55560 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55570 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44280 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44284 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44300 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44312 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44314 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59450 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59460 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59470 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59476 - "GET /task/progress/75956d92-213d-428c-86b0-86a8dbe25800 HTTP/1.1" 200 OK
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [146226]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [158038]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:modules.image_generator:FLUX model path configured: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
INFO:api_server:ImageGenerator initialized on demand
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.48it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 25.43it/s]
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:02,  2.23it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 55.10it/s]
Loading pipeline components...:  43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 3/7 [00:00<00:00,  6.18it/s]Loading pipeline components...:  71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 5/7 [00:00<00:00,  8.82it/s]You set `add_prefix_space`. The tokenizer needs to be converted from the slow tokenizers
Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:01<00:00,  7.84it/s]Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:01<00:00,  7.00it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: A photograph from [the opening of the Eiffel Tower in Paris in 1889] captures the monumental occasion with a grand, historic ambiance. The image shows [the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline]. Crowds of people, dressed in late 19th-century attire, are gathered around, marveling at the iconic new landmark. The photograph exudes a sense of excitement and wonder as [Parisians celebrate the unveiling of this groundbreaking architectural feat].
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:01<00:01,  1.01s/it]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.13it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.11it/s]
The image processor of type `Qwen2VLImageProcessor` is now loaded as a fast processor by default, even if the model checkpoint was saved with a slow processor. This is a breaking change and may produce slightly different outputs. To continue using the slow processor, instantiate this class with `use_fast=False`. Note that this behavior will be extended to all models in a future release.
You have video processor config saved in `preprocessor.json` file which is deprecated. Video processor configs should be saved in their own `video_preprocessor.json` file. You can rename the file or load and save the processor back which renames it automatically. Loading from `preprocessor.json` will be removed in v5.0.
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: "A high-resolution photograph taken on the morning of May 6, 1889, capturing the grand opening of the Eiffel Tower in Paris. The scene is set against a bustling Parisian skyline with the towering iron structure still under construction. The crowd, dressed in late 19th-century clothing, gathers around the tower, admiring its iconic appearance. The photograph features rich textures and colors, highlighting the intricate details of the ironwork and the vibrant energy of the moment. The composition emphasizes the juxtaposition between the human figures and the imposing structure, creating a dynamic and engaging visual narrative."
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: A photograph from [the opening of the Eiffel Tower in Paris in 1889] captures the monumental occasion with a grand, historic ambiance. The image shows [the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline]. Crowds of people, dressed in late 19th-century attire, are gathered around, marveling at the iconic new landmark. The photograph exudes a sense of excitement and wonder as [Parisians celebrate the unveiling of this groundbreaking architectural feat].
INFO:modules.image_generator:Optimized prompt: "A high-resolution photograph taken on the morning of May 6, 1889, capturing the grand opening of the Eiffel Tower in Paris. The scene is set against a bustling Parisian skyline with the towering iron structure still under construction. The crowd, dressed in late 19th-century clothing, gathers around the tower, admiring its iconic appearance. The photograph features rich textures and colors, highlighting the intricate details of the ironwork and the vibrant energy of the moment. The composition emphasizes the juxtaposition between the human figures and the imposing structure, creating a dynamic and engaging visual narrative."
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: "A high-resolution photograph taken on the morning of May 6, 1889, capturing the grand opening of the Eiffel Tower in Paris. The scene is set against a bustling Parisian skyline with the towering iron structure still under construction. The crowd, dressed in late 19th-century clothing, gathers around the tower, admiring its iconic appearance. The photograph features rich textures and colors, highlighting the intricate details of the ironwork and the vibrant energy of the moment. The composition emphasizes the juxtaposition between the human figures and the imposing structure, creating a dynamic and engaging visual narrative."
INFO:modules.image_generator:Size: 768x1024, Seed: 42
INFO:modules.image_generator:Generating image 1/1 with seed 42
Token indices sequence length is longer than the specified maximum sequence length for this model (122 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['rich textures and colors, highlighting the intricate details of the ironwork and the vibrant energy of the moment. the composition emphasizes the juxtaposition between the human figures and the imposing structure, creating a dynamic and engaging visual narrative."']
  0%|          | 0/20 [00:00<?, ?it/s]  5%|â–Œ         | 1/20 [00:04<01:17,  4.10s/it] 10%|â–ˆ         | 2/20 [00:07<01:04,  3.59s/it] 15%|â–ˆâ–Œ        | 3/20 [00:10<00:58,  3.44s/it] 20%|â–ˆâ–ˆ        | 4/20 [00:13<00:52,  3.27s/it] 25%|â–ˆâ–ˆâ–Œ       | 5/20 [00:16<00:49,  3.27s/it] 30%|â–ˆâ–ˆâ–ˆ       | 6/20 [00:19<00:44,  3.18s/it] 35%|â–ˆâ–ˆâ–ˆâ–Œ      | 7/20 [00:23<00:41,  3.19s/it] 40%|â–ˆâ–ˆâ–ˆâ–ˆ      | 8/20 [00:26<00:37,  3.13s/it] 45%|â–ˆâ–ˆâ–ˆâ–ˆâ–Œ     | 9/20 [00:29<00:34,  3.17s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 10/20 [00:32<00:31,  3.11s/it] 55%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ    | 11/20 [00:35<00:28,  3.15s/it] 60%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 12/20 [00:38<00:24,  3.10s/it] 65%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ   | 13/20 [00:41<00:22,  3.15s/it] 70%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   | 14/20 [00:44<00:18,  3.12s/it]INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 15/20 [00:48<00:15,  3.16s/it] 80%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 16/20 [00:51<00:12,  3.12s/it] 85%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 17/20 [00:54<00:09,  3.16s/it] 90%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 18/20 [00:57<00:06,  3.11s/it] 95%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ| 19/20 [01:00<00:03,  3.13s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 20/20 [01:03<00:00,  3.08s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 20/20 [01:03<00:00,  3.18s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:52422 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [158038]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 204
    async def
             ^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 204
    async def
             ^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 204
    async def generate_image_new()
                                  ^
SyntaxError: expected ':'
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 204
    async def generate_image_new(A photograph from [the opening of the Eiffel Tower in Paris in 1889] captures the monumental occasion with a grand, historic ambiance. The image shows [the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline]. Crowds of people, dressed in late 19th-century attire, are gathered around, marveling at the iconic new landmark. The photograph exudes a sense of excitement and wonder as [Parisians celebrate the unveiling of this groundbreaking architectural feat].
                                                                                                                                                                                                                                                                                                                                       ^
SyntaxError: invalid decimal literal
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 204
    async def generate_image_new()
                                  ^
SyntaxError: expected ':'
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 207
    @app.post("/image/generate", response_model=ImageGenerateResponse)
    ^
IndentationError: expected an indented block after function definition on line 204
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 205
    A photograph from [the opening of the Eiffel Tower in Paris in 1889] captures the monumental occasion with a grand, historic ambiance. The image shows [the towering iron structure, still under construction, against a backdrop of a bustling Parisian skyline]. Crowds of people, dressed in late 19th-century attire, are gathered around, marveling at the iconic new landmark. The photograph exudes a sense of excitement and wonder as [Parisians celebrate the unveiling of this groundbreaking architectural feat].
                                                                                                                                                                                                                                                                                                          ^
SyntaxError: invalid decimal literal
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 204
    async def generate_image_new()
                                  ^
SyntaxError: expected ':'
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 207
    @app.post("/image/generate", response_model=ImageGenerateResponse)
    ^
IndentationError: expected an indented block after function definition on line 204
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 207
    @app.post("/image/generate", response_model=ImageGenerateResponse)
    ^
IndentationError: expected an indented block after function definition on line 204
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 219
    except Exception as e:
                          ^
IndentationError: unindent does not match any outer indentation level
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 207
    task_progress[request.task_id] = {"progress": 0, "status": "starting"}
    ^
IndentationError: expected an indented block after 'try' statement on line 205
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 207
    task_progress[request.task_id] = {"progress": 0, "status": "starting"}
    ^
IndentationError: expected an indented block after 'try' statement on line 205
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [163933]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:44608 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44624 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44640 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44648 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44650 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51164 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51172 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51188 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51202 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51214 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45752 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45762 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45768 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45784 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45788 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52688 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52700 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52702 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52704 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52708 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55776 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55784 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55794 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55798 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55812 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51170 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51174 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51182 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51186 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51192 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34972 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34986 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34994 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35006 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35020 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39240 - "GET /task/progress/c42f795d-0cdf-4cd4-ad5f-6ace888d5332 HTTP/1.1" 200 OK
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [163933]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [164234]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [164234]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [164921]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [164921]
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [165369]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [165369]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async def 
              ^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async def initialize_and_generate_Image(request)
                                                    ^
SyntaxError: expected ':'
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async def initialize_and_generate_Image(request: )
                                                     ^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async def initialize_and_generate_Image(request: Image)
                                                           ^
SyntaxError: expected ':'
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async def initialize_and_generate_Image(request: ImageGenerateReques)
                                                                         ^
SyntaxError: expected ':'
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 226
    @app.post("/image/generate", response_model=ImageGenerateResponse)
    ^
IndentationError: expected an indented block after function definition on line 224
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 227
    @app.post("/image/generate", response_model=ImageGenerateResponse)
    ^
IndentationError: expected an indented block after function definition on line 224
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 227
    @app.post("/image/generate", response_model=ImageGenerateResponse)
    ^
IndentationError: expected an indented block after function definition on line 224
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 227
    @app.post("/image/generate", response_model=ImageGenerateResponse)
    ^
IndentationError: expected an indented block after function definition on line 224
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [168050]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [168050]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [168577]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [168577]
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    as
    ^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(res)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(res)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(res)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(reques)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(request)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(request: )
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(request: Vifd)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(request: Vid)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(request: Video)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(request: VideoGenerateRequest)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 224
    async initialize_and_generate_Image(request: VideoGenerateRequest):
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 227
    @app.post("/image/generate", response_model=ImageGenerateResponse)
    ^
IndentationError: expected an indented block after function definition on line 224
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 125, in _main
    prepare(preparation_data)
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 236, in prepare
    _fixup_main_from_path(data['init_main_from_path'])
  File "/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/spawn.py", line 287, in _fixup_main_from_path
    main_content = runpy.run_path(main_path,
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 288, in run_path
    code, fname = _get_code_from_file(run_name, path_name)
  File "/root/miniconda3/envs/demo/lib/python3.10/runpy.py", line 257, in _get_code_from_file
    code = compile(f.read(), fname, 'exec')
  File "/root/autodl-tmp/EasyVideo/ai-service/api_server.py", line 225
    """å®Œå…¨å¼‚æ­¥çš„è§†é¢‘ç”Ÿæˆåˆå§‹åŒ–å’Œæ‰§è¡Œ"""
    ^
IndentationError: expected an indented block after function definition on line 224
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [171387]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [171387]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [171623]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [171623]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [171976]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [171976]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [173876]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:watchfiles.main:1 change detected
WARNING:  WatchFiles detected changes in 'api_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [173876]
INFO:__mp_main__:AI service started with lazy loading support
INFO:api_server:AI service started with lazy loading support
INFO:     Started server process [174237]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:watchfiles.main:3 changes detected
INFO:modules.image_generator:FLUX model path configured: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
INFO:api_server:ImageGenerator initialized on demand
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards:  67%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹   | 2/3 [00:00<00:00, 19.96it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 24.05it/s]
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:02,  2.23it/s]You set `add_prefix_space`. The tokenizer needs to be converted from the slow tokenizers
Loading pipeline components...:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 4/7 [00:00<00:00,  5.43it/s]Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00,  7.90it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 55.61it/s]
Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:01<00:00,  7.00it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: Title: â€œEchoes of the Lost Cityâ€ â€“ Bold, atmospheric text at the top, evoking mystery and adventure. Main Character: A rugged explorer with a worn leather jacket, a map in hand, standing at the edge of an ancient jungle. The characterâ€™s face is partially shadowed, adding intrigue.
Background: The lost city, overgrown with vines, looming through the mist. A faint, golden glow emanates from the depths of the ruins.
Supporting Characters: A brave female archaeologist with a determined expression, a large dog companion. Weedar Branding: The branding subtly placed at the bottom corner, maintaining the realism of the scene.
Tagline: â€œDiscover the secrets buried beneath the earth.â€
Visual Style: Dark, moody lighting with a realistic and cinematic look, utilizing muted earth tones and textures that suggest age and decay.
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:01<00:01,  1.02s/it]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.12it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.09it/s]
The image processor of type `Qwen2VLImageProcessor` is now loaded as a fast processor by default, even if the model checkpoint was saved with a slow processor. This is a breaking change and may produce slightly different outputs. To continue using the slow processor, instantiate this class with `use_fast=False`. Note that this behavior will be extended to all models in a future release.
You have video processor config saved in `preprocessor.json` file which is deprecated. Video processor configs should be saved in their own `video_preprocessor.json` file. You can rename the file or load and save the processor back which renames it automatically. Loading from `preprocessor.json` will be removed in v5.0.
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: **Prompt:** "Title: Echoes of the Lost City" â€“ Bold, atmospheric text at the top, evoking mystery and adventure. Main Character: A rugged explorer wearing a worn leather jacket, holding a map, standing at the edge of an ancient jungle. The explorer's face is partially shadowed, adding intrigue. Background: The lost city, overgrown with vines, looming through the mist. Faint, golden glow emanating from the depths of the ruins. Supporting Characters: A brave female archaeologist with a determined expression, accompanied by a large dog. Wearer Branding: Subtle placement at the bottom corner, maintaining realism. Tagline: Discover the secrets buried beneath the earth. Visual Style: Dark, moody lighting; realistic and cinematic look; muted earth tones and textures suggesting age and decay. High-quality 4K resolution, attention to detail in textures, dynamic contrast between light and dark areas, carefully balanced color palette for depth and atmosphere, smooth gradients and soft shadows for realism.
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: Title: â€œEchoes of the Lost Cityâ€ â€“ Bold, atmospheric text at the top, evoking mystery and adventure. Main Character: A rugged explorer with a worn leather jacket, a map in hand, standing at the edge of an ancient jungle. The characterâ€™s face is partially shadowed, adding intrigue.
Background: The lost city, overgrown with vines, looming through the mist. A faint, golden glow emanates from the depths of the ruins.
Supporting Characters: A brave female archaeologist with a determined expression, a large dog companion. Weedar Branding: The branding subtly placed at the bottom corner, maintaining the realism of the scene.
Tagline: â€œDiscover the secrets buried beneath the earth.â€
Visual Style: Dark, moody lighting with a realistic and cinematic look, utilizing muted earth tones and textures that suggest age and decay.
INFO:modules.image_generator:Optimized prompt: **Prompt:** "Title: Echoes of the Lost City" â€“ Bold, atmospheric text at the top, evoking mystery and adventure. Main Character: A rugged explorer wearing a worn leather jacket, holding a map, standing at the edge of an ancient jungle. The explorer's face is partially shadowed, adding intrigue. Background: The lost city, overgrown with vines, looming through the mist. Faint, golden glow emanating from the depths of the ruins. Supporting Characters: A brave female archaeologist with a determined expression, accompanied by a large dog. Wearer Branding: Subtle placement at the bottom corner, maintaining realism. Tagline: Discover the secrets buried beneath the earth. Visual Style: Dark, moody lighting; realistic and cinematic look; muted earth tones and textures suggesting age and decay. High-quality 4K resolution, attention to detail in textures, dynamic contrast between light and dark areas, carefully balanced color palette for depth and atmosphere, smooth gradients and soft shadows for realism.
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: **Prompt:** "Title: Echoes of the Lost City" â€“ Bold, atmospheric text at the top, evoking mystery and adventure. Main Character: A rugged explorer wearing a worn leather jacket, holding a map, standing at the edge of an ancient jungle. The explorer's face is partially shadowed, adding intrigue. Background: The lost city, overgrown with vines, looming through the mist. Faint, golden glow emanating from the depths of the ruins. Supporting Characters: A brave female archaeologist with a determined expression, accompanied by a large dog. Wearer Branding: Subtle placement at the bottom corner, maintaining realism. Tagline: Discover the secrets buried beneath the earth. Visual Style: Dark, moody lighting; realistic and cinematic look; muted earth tones and textures suggesting age and decay. High-quality 4K resolution, attention to detail in textures, dynamic contrast between light and dark areas, carefully balanced color palette for depth and atmosphere, smooth gradients and soft shadows for realism.
INFO:modules.image_generator:Size: 768x1024, Seed: 42
INFO:modules.image_generator:Generating image 1/1 with seed 42
Token indices sequence length is longer than the specified maximum sequence length for this model (203 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: [', looming through the mist. faint, golden glow emanating from the depths of the ruins. supporting characters : a brave female archaeologist with a determined expression, accompanied by a large dog. wearer branding : subtle placement at the bottom corner, maintaining realism. tagline : discover the secrets buried beneath the earth. visual style : dark, moody lighting ; realistic and cinematic look ; muted earth tones and textures suggesting age and decay. high - quality 4 k resolution, attention to detail in textures, dynamic contrast between light and dark areas, carefully balanced color palette for depth and atmosphere, smooth gradients and soft shadows for realism.']
  0%|          | 0/20 [00:00<?, ?it/s]  5%|â–Œ         | 1/20 [00:03<01:12,  3.82s/it] 10%|â–ˆ         | 2/20 [00:07<01:02,  3.48s/it] 15%|â–ˆâ–Œ        | 3/20 [00:10<00:57,  3.39s/it] 20%|â–ˆâ–ˆ        | 4/20 [00:13<00:52,  3.26s/it] 25%|â–ˆâ–ˆâ–Œ       | 5/20 [00:16<00:48,  3.27s/it] 30%|â–ˆâ–ˆâ–ˆ       | 6/20 [00:19<00:44,  3.18s/it] 35%|â–ˆâ–ˆâ–ˆâ–Œ      | 7/20 [00:22<00:41,  3.19s/it] 40%|â–ˆâ–ˆâ–ˆâ–ˆ      | 8/20 [00:25<00:37,  3.12s/it] 45%|â–ˆâ–ˆâ–ˆâ–ˆâ–Œ     | 9/20 [00:29<00:34,  3.15s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 10/20 [00:32<00:31,  3.10s/it] 55%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ    | 11/20 [00:35<00:28,  3.14s/it] 60%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 12/20 [00:38<00:24,  3.11s/it] 65%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ   | 13/20 [00:41<00:22,  3.16s/it] 70%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   | 14/20 [00:44<00:18,  3.12s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 15/20 [00:47<00:15,  3.16s/it] 80%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 16/20 [00:50<00:12,  3.11s/it] 85%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 17/20 [00:54<00:09,  3.14s/it] 90%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 18/20 [00:57<00:06,  3.10s/it] 95%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ| 19/20 [01:00<00:03,  3.14s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 20/20 [01:03<00:00,  3.10s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 20/20 [01:03<00:00,  3.17s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:42026 - "POST /image/generate HTTP/1.1" 200 OK
INFO:     127.0.0.1:53156 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53170 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53182 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53196 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53200 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59778 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59782 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59790 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59798 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59806 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43334 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43350 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43366 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43376 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43382 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:32908 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:32924 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:32934 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:32940 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:32944 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55054 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55060 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55074 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55088 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50984 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50998 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51012 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51024 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51026 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59196 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59198 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59208 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59222 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59232 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53888 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53892 - "GET /task/progress/d7806231-fc02-4419-8e71-5f7c6fc31d61 HTTP/1.1" 200 OK
INFO:modules.image_generator:Loading FLUX.1-Krea-dev model on demand from: /root/autodl-tmp/black-forest-labs/FLUX.1-Kontext-dev
Loading pipeline components...:   0%|          | 0/7 [00:00<?, ?it/s]
Loading checkpoint shards:   0%|          | 0/3 [00:00<?, ?it/s][A
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 24.86it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:00<00:00, 24.80it/s]
Loading pipeline components...:  14%|â–ˆâ–        | 1/7 [00:00<00:01,  4.73it/s]Loading pipeline components...:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 4/7 [00:00<00:00,  7.61it/s]Loading pipeline components...:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 6/7 [00:00<00:00, 10.35it/s]
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s][ALoading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00<00:00, 58.18it/s]
Loading pipeline components...: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 7/7 [00:00<00:00,  9.57it/s]
INFO:modules.image_generator:FLUX.1-Krea-dev model loaded successfully
INFO:modules.prompt_optimizer:Qwen model path configured: /root/autodl-tmp/Qwen/Qwen2.5-VL-3B-Instruct
INFO:modules.prompt_optimizer:Optimizing prompt: Title: â€œEchoes of the Lost Cityâ€ â€“ Bold, atmospheric text at the top, evoking mystery and adventure. Main Character: A rugged explorer with a worn leather jacket, a map in hand, standing at the edge of an ancient jungle. The characterâ€™s face is partially shadowed, adding intrigue.
Background: The lost city, overgrown with vines, looming through the mist. A faint, golden glow emanates from the depths of the ruins.
Supporting Characters: A brave female archaeologist with a determined expression, a large dog companion. Weedar Branding: The branding subtly placed at the bottom corner, maintaining the realism of the scene.
Tagline: â€œDiscover the secrets buried beneath the earth.â€
Visual Style: Dark, moody lighting with a realistic and cinematic look, utilizing muted earth tones and textures that suggest age and decay.
INFO:modules.prompt_optimizer:Optimization type: é€šç”¨åž‹
INFO:modules.prompt_optimizer:Task type: image
INFO:modules.prompt_optimizer:Model not loaded, initializing now...
INFO:modules.prompt_optimizer:Loading Qwen2.5-VL model on demand...
INFO:accelerate.utils.modeling:We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 1/2 [00:01<00:01,  1.02s/it]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.14it/s]Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.11it/s]
INFO:modules.prompt_optimizer:Qwen2.5-VL model loaded successfully
INFO:modules.prompt_optimizer:AI optimized prompt: **Title:** "Echoes of the Lost City" - Bold, atmospheric text at the top, evoking mystery and adventure. **Main Character:** A rugged explorer with a worn leather jacket, holding a weathered map, standing at the edge of an ancient jungle. His face is partially shadowed to add intrigue. **Background:** Overgrown with vines, the lost city looms through misty haze. A faint, golden glow emanates from the depths of the ruins. **Supporting Characters:** A brave female archaeologist with a determined expression, accompanied by a large, loyal dog. **Weedar Branding:** Subtle placement in the bottom corner maintains realism. **Tagline:** "Discover the secrets buried beneath the earth." **Visual Style:** Dark, moody lighting with a realistic and cinematic look. Utilize muted earth tones and textures suggesting age and decay. Use high-resolution textures for detailed materials like leather, wood, and stone. Enhance shadows and highlights to create depth and realism. Ensure consistent color palette throughout the image to maintain visual cohesion.
INFO:modules.prompt_optimizer:Unloading Qwen2.5-VL model to free memory...
INFO:modules.prompt_optimizer:Qwen2.5-VL model unloaded successfully
INFO:modules.image_generator:Original prompt: Title: â€œEchoes of the Lost Cityâ€ â€“ Bold, atmospheric text at the top, evoking mystery and adventure. Main Character: A rugged explorer with a worn leather jacket, a map in hand, standing at the edge of an ancient jungle. The characterâ€™s face is partially shadowed, adding intrigue.
Background: The lost city, overgrown with vines, looming through the mist. A faint, golden glow emanates from the depths of the ruins.
Supporting Characters: A brave female archaeologist with a determined expression, a large dog companion. Weedar Branding: The branding subtly placed at the bottom corner, maintaining the realism of the scene.
Tagline: â€œDiscover the secrets buried beneath the earth.â€
Visual Style: Dark, moody lighting with a realistic and cinematic look, utilizing muted earth tones and textures that suggest age and decay.
INFO:modules.image_generator:Optimized prompt: **Title:** "Echoes of the Lost City" - Bold, atmospheric text at the top, evoking mystery and adventure. **Main Character:** A rugged explorer with a worn leather jacket, holding a weathered map, standing at the edge of an ancient jungle. His face is partially shadowed to add intrigue. **Background:** Overgrown with vines, the lost city looms through misty haze. A faint, golden glow emanates from the depths of the ruins. **Supporting Characters:** A brave female archaeologist with a determined expression, accompanied by a large, loyal dog. **Weedar Branding:** Subtle placement in the bottom corner maintains realism. **Tagline:** "Discover the secrets buried beneath the earth." **Visual Style:** Dark, moody lighting with a realistic and cinematic look. Utilize muted earth tones and textures suggesting age and decay. Use high-resolution textures for detailed materials like leather, wood, and stone. Enhance shadows and highlights to create depth and realism. Ensure consistent color palette throughout the image to maintain visual cohesion.
INFO:modules.image_generator:Generating 1 images with FLUX model
INFO:modules.image_generator:Prompt: **Title:** "Echoes of the Lost City" - Bold, atmospheric text at the top, evoking mystery and adventure. **Main Character:** A rugged explorer with a worn leather jacket, holding a weathered map, standing at the edge of an ancient jungle. His face is partially shadowed to add intrigue. **Background:** Overgrown with vines, the lost city looms through misty haze. A faint, golden glow emanates from the depths of the ruins. **Supporting Characters:** A brave female archaeologist with a determined expression, accompanied by a large, loyal dog. **Weedar Branding:** Subtle placement in the bottom corner maintains realism. **Tagline:** "Discover the secrets buried beneath the earth." **Visual Style:** Dark, moody lighting with a realistic and cinematic look. Utilize muted earth tones and textures suggesting age and decay. Use high-resolution textures for detailed materials like leather, wood, and stone. Enhance shadows and highlights to create depth and realism. Ensure consistent color palette throughout the image to maintain visual cohesion.
INFO:modules.image_generator:Size: 768x1024, Seed: 42
INFO:modules.image_generator:Generating image 1/1 with seed 42
Token indices sequence length is longer than the specified maximum sequence length for this model (216 > 77). Running this sequence through the model will result in indexing errors
The following part of your input was truncated because CLIP can only handle sequences up to 77 tokens: ['lost city looms through misty haze. a faint, golden glow emanates from the depths of the ruins. ** supporting characters :** a brave female archaeologist with a determined expression, accompanied by a large, loyal dog. ** weedar branding :** subtle placement in the bottom corner maintains realism. ** tagline :** " discover the secrets buried beneath the earth." ** visual style :** dark, moody lighting with a realistic and cinematic look. utilize muted earth tones and textures suggesting age and decay. use high - resolution textures for detailed materials like leather, wood, and stone. enhance shadows and highlights to create depth and realism. ensure consistent color palette throughout the image to maintain visual cohesion.']
  0%|          | 0/20 [00:00<?, ?it/s]  5%|â–Œ         | 1/20 [00:03<01:12,  3.83s/it] 10%|â–ˆ         | 2/20 [00:07<01:02,  3.47s/it] 15%|â–ˆâ–Œ        | 3/20 [00:10<00:56,  3.34s/it] 20%|â–ˆâ–ˆ        | 4/20 [00:13<00:51,  3.19s/it] 25%|â–ˆâ–ˆâ–Œ       | 5/20 [00:16<00:47,  3.18s/it] 30%|â–ˆâ–ˆâ–ˆ       | 6/20 [00:19<00:43,  3.09s/it] 35%|â–ˆâ–ˆâ–ˆâ–Œ      | 7/20 [00:22<00:40,  3.13s/it] 40%|â–ˆâ–ˆâ–ˆâ–ˆ      | 8/20 [00:25<00:36,  3.07s/it] 45%|â–ˆâ–ˆâ–ˆâ–ˆâ–Œ     | 9/20 [00:28<00:34,  3.13s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 10/20 [00:31<00:30,  3.08s/it] 55%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ    | 11/20 [00:34<00:28,  3.12s/it] 60%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 12/20 [00:37<00:24,  3.07s/it] 65%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ   | 13/20 [00:41<00:21,  3.10s/it] 70%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   | 14/20 [00:43<00:18,  3.06s/it] 75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 15/20 [00:47<00:15,  3.11s/it] 80%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 16/20 [00:50<00:12,  3.06s/it] 85%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 17/20 [00:53<00:09,  3.11s/it] 90%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 18/20 [00:56<00:06,  3.08s/it] 95%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ| 19/20 [00:59<00:03,  3.13s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 20/20 [01:02<00:00,  3.09s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 20/20 [01:02<00:00,  3.13s/it]
INFO:modules.image_generator:Unloading FLUX model to free memory...
INFO:modules.image_generator:FLUX model unloaded successfully
INFO:api_server:ImageGenerator model unloaded successfully
INFO:     127.0.0.1:44428 - "POST /image/generate HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: d7806231-fc02-4419-8e71-5f7c6fc31d61
INFO:     127.0.0.1:44438 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44448 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:44460 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51272 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51286 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51288 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51300 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51314 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41696 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41710 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41712 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41728 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41738 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46344 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46348 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46362 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46368 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46384 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58134 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58148 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58158 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58164 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58168 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40708 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40724 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40740 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40748 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40750 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48340 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48352 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48362 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48372 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48376 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57596 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57598 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57612 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57628 - "GET /task/progress/8df8feed-feb4-4048-810c-4c2b85cd74b0 HTTP/1.1" 200 OK
INFO:api_server:Cleaned up task progress for task_id: 8df8feed-feb4-4048-810c-4c2b85cd74b0
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [174237]
INFO:     Stopping reloader process [4545]
/root/miniconda3/envs/demo/lib/python3.10/multiprocessing/resource_tracker.py:224: UserWarning: resource_tracker: There appear to be 5 leaked semaphore objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '
